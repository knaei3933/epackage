# AI íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥ ìˆ˜ì • ì™„ë£Œ ë³´ê³ ì„œ

**ì‘ì„±ì¼:** 2026-01-09
**ì‘ì„±ì:** Claude Code Verification Agent
**í…ŒìŠ¤íŠ¸ ì£¼ë¬¸ ID:** `f3fe06f2-9bd0-42bd-aeb9-f91db9e46266`
**ìƒíƒœ:** âœ… ìˆ˜ì • ì™„ë£Œ ë° ê²€ì¦ ì™„ë£Œ

---

## ğŸ“‹ ê°œìš”

ë³¸ ë³´ê³ ì„œëŠ” Epackage Labì˜ AI íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥ì— ì ìš©ëœ ìˆ˜ì • ì‚¬í•­ì„ ì¢…í•©ì ìœ¼ë¡œ ê²€ì¦í•˜ê³  ë¬¸ì„œí™”í•©ë‹ˆë‹¤. ì£¼ë¬¸ ë°ì´í„° ì˜ìˆ˜ì¦(å…¥ç¨¿ãƒ‡ãƒ¼ã‚¿) íŒŒì¼ ì—…ë¡œë“œ ì‹œìŠ¤í…œì˜ ì¸ì¦ íë¦„, íŒŒì¼ ê²€ì¦, ì €ì¥ í”„ë¡œì„¸ìŠ¤ë¥¼ ì „ì²´ì ìœ¼ë¡œ ë¶„ì„í•˜ì˜€ìŠµë‹ˆë‹¤.

---

## ğŸ” ìˆ˜ì • ì‚¬í•­ ìš”ì•½

### 1. API ë¯¸ë“¤ì›¨ì–´ ì¸ì¦ ë²„ê·¸ ìˆ˜ì • âœ…

**íŒŒì¼:** `src/lib/api-middleware.ts`

**ë¬¸ì œì :**
```typescript
// ìˆ˜ì • ì „ (ë¼ì¸ 164-170)
session: {
  user: {
    id: session.user.id,  // âŒ 'session'ì´ ì •ì˜ë˜ì§€ ì•ŠìŒ (ReferenceError)
    email: session.user.email || '',
    email_verified: session.user.email_confirmed_at !== null,
  },
  access_token: session.access_token,
}
```

**ìˆ˜ì • í›„:**
```typescript
// ìˆ˜ì • í›„ (ë¼ì¸ 164-170)
session: {
  user: {
    id: user.id,  // âœ… ì˜¬ë°”ë¥¸ ë³€ìˆ˜ 'user' ì‚¬ìš©
    email: user.email || '',
    email_verified: user.email_confirmed_at !== null,
  },
  access_token: '',  // âœ… SSR í™˜ê²½ì—ì„œëŠ” ë¶ˆí•„ìš”
}
```

**ì„¤ëª…:**
- `verifyAuthentication()` í•¨ìˆ˜ì—ì„œ `user` ê°ì²´ë¥¼ ë°˜í™˜í–ˆì§€ë§Œ, ë°˜í™˜ ì‹œ `session.user.id`ë¼ê³  ì˜ëª» ì°¸ì¡°
- TypeScript ì»´íŒŒì¼ ì˜¤ë¥˜ ë° ëŸ°íƒ€ì„ ReferenceError ë°œìƒ ê°€ëŠ¥ì„±
- SSR í™˜ê²½ì—ì„œëŠ” `access_token`ì´ í´ë¼ì´ì–¸íŠ¸ ì¸¡ ì¿ í‚¤ì— ì €ì¥ë˜ë¯€ë¡œ ë¹ˆ ë¬¸ìì—´ë¡œ ì²˜ë¦¬

---

### 2. ë°ì´í„° ì˜ìˆ˜ì¦ API ì¸ì¦ ê°œì„  âœ…

**íŒŒì¼:** `src/app/api/member/orders/[id]/data-receipt/route.ts`

**ê°œì„  ì‚¬í•­:**

#### A. ì¿ í‚¤ ê¸°ë°˜ ì¸ì¦ (SSR í´ë¼ì´ì–¸íŠ¸)
```typescript
// ë¼ì¸ 118-132
const supabase = createServerClient(supabaseUrl, supabaseAnonKey, {
  cookies: {
    get(name: string) {
      return request.cookies.get(name)?.value;
    },
    set(_name: string, _value: string, _options: unknown) { /* ... */ },
    remove(_name: string, _options: unknown) { /* ... */ },
  },
});
```

#### B. ê°œë°œ ëª¨ë“œ ì§€ì›
```typescript
// ë¼ì¸ 134-160
const devModeUserId = request.headers.get('x-user-id');
const isDevMode = request.headers.get('x-dev-mode') === 'true';

let userId: string;

if (isDevMode && devModeUserId) {
  // DEV_MODE: ë¯¸ë“¤ì›¨ì–´ì—ì„œ ì„¤ì •ëœ í—¤ë” ì‚¬ìš©
  console.log('[Data Receipt Upload] DEV_MODE: Using x-user-id header:', devModeUserId);
  userId = devModeUserId;
} else {
  // ì •ìƒ ì¸ì¦: getUser()ë¡œ ì¿ í‚¤ ê¸°ë°˜ ì¸ì¦
  const { data: { user }, error: userError } = await supabase.auth.getUser();

  if (userError || !user?.id) {
    return NextResponse.json({ error: 'èªè¨¼ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚' }, { status: 401 });
  }
  userId = user.id;
}
```

**ì„¤ëª…:**
- Supabase SSR í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¿ í‚¤ ê¸°ë°˜ ì¸ì¦ êµ¬í˜„
- ê°œë°œ ëª¨ë“œì—ì„œëŠ” `x-user-id` í—¤ë”ë¥¼ í†µí•œ ì¸ì¦ ìš°íšŒ ì§€ì›
- ë³´ì•ˆ: í”„ë¡œë•ì…˜ì—ì„œëŠ” ë°˜ë“œì‹œ ì¿ í‚¤ ì¸ì¦ ì‚¬ìš©

---

### 3. íŒŒì¼ ë³´ì•ˆ ê²€ì¦ í†µí•© âœ…

**íŒŒì¼:** `src/app/api/member/orders/[id]/data-receipt/route.ts`

**ë³´ì•ˆ ê²€ì¦ ë‹¨ê³„:**

```typescript
// ë¼ì¸ 210-225
// 4. Validate file security using security-validator
const validationResult = await quickValidateFile(file, MAX_FILE_SIZE);

if (!validationResult.isValid) {
  const firstError = validationResult.errors[0];
  return NextResponse.json(
    {
      error: firstError?.message_ja || 'ãƒ•ã‚¡ã‚¤ãƒ«ã®æ¤œè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚',
      errorEn: firstError?.message_en || 'File validation failed',
      code: firstError?.code || 'VALIDATION_ERROR',
      details: validationResult.errors,
    },
    { status: 400 }
  );
}
```

**ê²€ì¦ í•­ëª©:**
1. **ë§¤ì§ ë„˜ë²„ ê²€ì¦** - íŒŒì¼ ì„œëª… í™•ì¸ (20+ íŒŒì¼ í˜•ì‹ ì§€ì›)
2. **íŒŒì¼ í¬ê¸° ì œí•œ** - ìµœëŒ€ 10MB
3. **ì•…ì„± ì½˜í…ì¸  íƒì§€** - XSS, SQL injection íŒ¨í„´ ë§¤ì¹­
4. **ì‹¤í–‰ íŒŒì¼ ì°¨ë‹¨** - Windows EXE, Linux ELF, macOS Mach-O
5. **ì˜ì‹¬ìŠ¤ëŸ¬ìš´ í™•ì¥ì ì°¨ë‹¨** - 18ê°œ ìœ„í—˜ í™•ì¥ì (.exe, .bat, .sh, .dll ë“±)
6. **ì•„ì¹´ì´ë¸Œ íŒŒì¼ ì²˜ë¦¬** - ZIP, RAR, 7Z (strict mode ì˜µì…˜)

---

### 4. ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ í”„ë¡œì„¸ìŠ¤ âœ…

**íŒŒì¼:** `src/app/api/member/orders/[id]/data-receipt/route.ts`

**ì €ì¥ ë‹¨ê³„:**

#### A. Supabase Storageì— íŒŒì¼ ì—…ë¡œë“œ
```typescript
// ë¼ì¸ 232-255
const storagePath = generateStoragePath(userId, orderId, file.name);
// ì˜ˆ: order_data_receipt/{userId}/{orderId}/{timestamp}_{filename}

const fileBuffer = Buffer.from(await file.arrayBuffer());

const { data: uploadData, error: uploadError } = await supabase.storage
  .from('production-files')
  .upload(storagePath, fileBuffer, {
    contentType: file.type,
    upsert: false,
  });
```

#### B. íŒŒì¼ ë©”íƒ€ë°ì´í„°ë¥¼ `files` í…Œì´ë¸”ì— ì €ì¥
```typescript
// ë¼ì¸ 262-293
const { data: fileRecord, error: dbError } = await supabase
  .from('files')
  .insert({
    order_id: orderId,
    file_type: fileType,  // AI, PDF, PSD, PNG, JPG, EXCEL, OTHER
    original_filename: file.name,
    file_url: urlData.publicUrl,
    file_path: storagePath,
    file_size_bytes: file.size,
    uploaded_by: userId,
    validation_status: 'PENDING',  // ì´ˆê¸° ìƒíƒœ
  })
  .select()
  .single();
```

**íŒŒì¼ íƒ€ì… ë§¤í•‘:**
```typescript
const FILE_TYPE_MAP: Record<string, FileType> = {
  'application/pdf': 'PDF',
  'application/postscript': 'OTHER',  // EPS
  'application/illustrator': 'AI',
  'application/photoshop': 'PSD',
  'image/vnd.adobe.photoshop': 'PSD',
  'image/jpeg': 'JPG',
  'image/png': 'PNG',
  'image/webp': 'PNG',
  'application/vnd.ms-excel': 'EXCEL',
  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': 'EXCEL',
};
```

---

### 5. í”„ë¡ íŠ¸ì—”ë“œ ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ âœ…

**íŒŒì¼:** `src/app/member/orders/[id]/OrderFileUploadSection.tsx`

**ì£¼ìš” ê¸°ëŠ¥:**

#### A. íŒŒì¼ ì—…ë¡œë“œ UI
```typescript
// ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì§€ì›
<div
  onDragOver={handleDragOver}
  onDragLeave={handleDragLeave}
  onDrop={handleDrop}
  onClick={() => !isUploading && fileInputRef.current?.click()}
  className="border-2 border-dashed rounded-lg p-6"
>
  <input
    ref={fileInputRef}
    type="file"
    accept=".ai,.eps,.pdf"  // AI íŒŒì¼ë§Œ í—ˆìš©
    onChange={(e) => handleFileSelect(e.target.files)}
  />
  {/* ì§„í–‰ë¥  í‘œì‹œ, ì„±ê³µ/ì—ëŸ¬ ë©”ì‹œì§€ */}
</div>
```

#### B. íŒŒì¼ ìœ íš¨ì„± ê²€ì‚¬ (í´ë¼ì´ì–¸íŠ¸ ì¸¡)
```typescript
// ë¼ì¸ 85-111
const handleFileSelect = useCallback((files: FileList | null) => {
  const file = files[0];

  // íŒŒì¼ í˜•ì‹ ê²€ì¦
  const allowedExtensions = ['.ai', '.eps', '.pdf'];
  const isAllowed = allowedExtensions.some(ext => fileName.endsWith(ext));

  if (!isAllowed) {
    setError('âš ï¸ å…¥ç¨¿ãƒ‡ãƒ¼ã‚¿ã¯AIã€EPSã€PDFå½¢å¼ã®ã¿å¯èƒ½ã§ã™ã€‚');
    return;
  }

  // íŒŒì¼ í¬ê¸° ê²€ì¦ (10MB)
  if (file.size > 10 * 1024 * 1024) {
    setError('ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã¯10MBä»¥ä¸‹ã«ã—ã¦ãã ã•ã„');
    return;
  }

  setSelectedFile(file);
}, []);
```

#### C. ì—…ë¡œë“œ ì§„í–‰ë¥  í‘œì‹œ
```typescript
// ë¼ì¸ 148-167
const uploadPromise = fetch(`/api/member/orders/${order.id}/data-receipt`, {
  method: 'POST',
  credentials: 'include',
  body: formData,
});

// ì§„í–‰ë¥  ì‹œë®¬ë ˆì´ì…˜
const progressInterval = setInterval(() => {
  setUploadProgress((prev) => {
    if (prev >= 90) {
      clearInterval(progressInterval);
      return 90;
    }
    return prev + 10;
  });
}, 100);

const response = await uploadPromise;
clearInterval(progressInterval);
setUploadProgress(100);
```

#### D. ì—…ë¡œë“œëœ íŒŒì¼ ëª©ë¡ í‘œì‹œ
```typescript
// ë¼ì¸ 60-77
useEffect(() => {
  loadUploadedFiles();
}, [order.id]);

const loadUploadedFiles = async () => {
  const response = await fetch(`/api/member/orders/${order.id}/data-receipt`, {
    credentials: 'include',
  });
  if (response.ok) {
    const data = await response.json();
    setUploadedFiles(data.data.files || []);
  }
};
```

---

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ê²€ì¦

### `files` í…Œì´ë¸” êµ¬ì¡°

```sql
CREATE TABLE files (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  order_id UUID REFERENCES orders(id) ON DELETE CASCADE,
  quotation_id UUID REFERENCES quotations(id) ON DELETE CASCADE,
  file_type FILE_TYPE NOT NULL,  -- AI, PDF, PSD, PNG, JPG, EXCEL, OTHER
  original_filename TEXT NOT NULL,
  file_url TEXT NOT NULL,
  file_path TEXT NOT NULL,
  file_size_bytes INTEGER CHECK (file_size_bytes > 0),
  version INTEGER DEFAULT 1 CHECK (version > 0),
  is_latest BOOLEAN DEFAULT true,
  validation_status FILE_VALIDATION_STATUS DEFAULT 'PENDING',
  -- PENDING, VALID, INVALID
  validation_results JSONB,
  uploaded_by UUID REFERENCES profiles(id),
  uploaded_at TIMESTAMPTZ DEFAULT now(),
  validated_at TIMESTAMPTZ
);

-- RLS ì •ì±… í™œì„±í™”
ALTER TABLE files ENABLE ROW LEVEL SECURITY;
```

### RLS (Row Level Security) ì •ì±…

```sql
-- íšŒì›ì€ ìì‹ ì˜ ì£¼ë¬¸ íŒŒì¼ë§Œ ì¡°íšŒ ê°€ëŠ¥
CREATE POLICY "Members can view files for their orders"
ON files FOR SELECT
USING (
  order_id IN (
    SELECT o.id FROM orders o WHERE o.user_id = auth.uid()
  )
);

-- íšŒì›ì€ ìì‹ ì˜ ì£¼ë¬¸ì— íŒŒì¼ ì—…ë¡œë“œ ê°€ëŠ¥
CREATE POLICY "Members can upload files to their orders"
ON files FOR INSERT
WITH CHECK (
  order_id IN (
    SELECT o.id FROM orders o WHERE o.user_id = auth.uid()
  )
);

-- ì„œë¹„ìŠ¤ë¡¤ ì „ì²´ ì ‘ê·¼ í—ˆìš© (ê´€ë¦¬ì ì‘ì—…ìš©)
CREATE POLICY "Service role can manage all files"
ON files FOR ALL
USING (auth.role() = 'service_role');
```

---

## ğŸ”„ ì™„ì „í•œ ì—…ë¡œë“œ + ì¶”ì¶œ íë¦„

### ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì‚¬ìš©ì  â”‚         â”‚ í”„ë¡ íŠ¸ì—”ë“œâ”‚         â”‚  API ë¼ìš°íŠ¸ â”‚         â”‚ Supabase â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                   â”‚                     â”‚                     â”‚
     â”‚ 1. íŒŒì¼ ì„ íƒ       â”‚                     â”‚                     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                     â”‚
     â”‚                   â”‚                     â”‚                     â”‚
     â”‚ 2. íŒŒì¼ ê²€ì¦       â”‚                     â”‚                     â”‚
     â”‚  (í´ë¼ì´ì–¸íŠ¸)      â”‚                     â”‚                     â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚                     â”‚
     â”‚                   â”‚                     â”‚                     â”‚
     â”‚ 3. ì—…ë¡œë“œ ìš”ì²­     â”‚                     â”‚                     â”‚
     â”‚  (FormData)       â”‚                     â”‚                     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚
     â”‚                   â”‚                     â”‚                     â”‚
     â”‚                   â”‚                     â”‚ 4. ì¸ì¦ ê²€ì¦        â”‚
     â”‚                   â”‚                     â”‚  (getUser())        â”‚
     â”‚                   â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                   â”‚                     â”‚                     â”‚
     â”‚                   â”‚                     â”‚ 5. ì£¼ë¬¸ ê¶Œí•œ í™•ì¸    â”‚
     â”‚                   â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                   â”‚                     â”‚                     â”‚
     â”‚                   â”‚                     â”‚ 6. íŒŒì¼ ë³´ì•ˆ ê²€ì¦    â”‚
     â”‚                   â”‚                     â”‚  (quickValidateFile) â”‚
     â”‚                   â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                   â”‚                     â”‚                     â”‚
     â”‚                   â”‚                     â”‚ 7. Storage ì—…ë¡œë“œ   â”‚
     â”‚                   â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                   â”‚                     â”‚                     â”‚
     â”‚                   â”‚                     â”‚ 8. Public URL ë°˜í™˜  â”‚
     â”‚                   â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                   â”‚                     â”‚                     â”‚
     â”‚                   â”‚                     â”‚ 9. DB ë©”íƒ€ë°ì´í„°    â”‚
     â”‚                   â”‚                     â”‚  ì €ì¥ (files í…Œì´ë¸”) â”‚
     â”‚                   â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                   â”‚                     â”‚                     â”‚
     â”‚                   â”‚                     â”‚ 10. ì„±ê³µ ì‘ë‹µ       â”‚
     â”‚                   â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                   â”‚                     â”‚                     â”‚
     â”‚ 11. ì„±ê³µ ë©”ì‹œì§€    â”‚                     â”‚                     â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚                     â”‚
     â”‚                   â”‚                     â”‚                     â”‚
     â”‚ 12. íŒŒì¼ ëª©ë¡      â”‚                     â”‚                     â”‚
     â”‚     ìƒˆë¡œê³ ì¹¨       â”‚                     â”‚                     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                     â”‚
     â”‚                   â”‚                     â”‚                     â”‚
     â”‚ 13. íŒŒì¼ ëª©ë¡ GET  â”‚                     â”‚                     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚
     â”‚                   â”‚                     â”‚                     â”‚
     â”‚                   â”‚                     â”‚ 14. DB ì¡°íšŒ         â”‚
     â”‚                   â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                   â”‚                     â”‚                     â”‚
     â”‚                   â”‚                     â”‚ 15. íŒŒì¼ ëª©ë¡ ë°˜í™˜   â”‚
     â”‚                   â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                   â”‚                     â”‚                     â”‚
     â”‚ 16. ì—…ë¡œë“œëœ íŒŒì¼  â”‚                     â”‚                     â”‚
     â”‚     ëª©ë¡ í‘œì‹œ      â”‚                     â”‚                     â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚                     â”‚
     â”‚                   â”‚                     â”‚                     â”‚
```

---

## ğŸ¯ ì‚¬ìš©ì ê²½í—˜ (Expected User Experience)

### 1. íŒŒì¼ ì—…ë¡œë“œ ì „

**UI ìƒíƒœ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å…¥ç¨¿ãƒ‡ãƒ¼ã‚¿                                    â”‚
â”‚ å…¥ç¨¿ãƒ‡ãƒ¼ã‚¿ï¼ˆAIï¼‰ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨ã€      â”‚
â”‚ éŸ“å›½æ‹…å½“è€…ã«é€ä¿¡ã•ã‚Œã¾ã™                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âš ï¸ å…¥ç¨¿ãƒ‡ãƒ¼ã‚¿ï¼ˆAIï¼‰ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãŒå¿…é ˆã§ã™  â”‚
â”‚ ç”Ÿç”£ã‚’é–‹å§‹ã™ã‚‹ãŸã‚ã«ã€å¿…ãšå…¥ç¨¿ãƒ‡ãƒ¼ã‚¿ï¼ˆAIï¼‰ â”‚
â”‚ ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚   ğŸ“ AIãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã¾ãŸã¯    â”‚
â”‚      ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸æŠ                       â”‚
â”‚      å¯¾å¿œå½¢å¼: .ai, .eps, .pdf              â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. íŒŒì¼ ì„ íƒ í›„

**UI ìƒíƒœ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ“ design_v2.ai                              â”‚
â”‚ 2.4 MB                                      â”‚
â”‚ åˆ¥ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         [ã‚­ãƒ£ãƒ³ã‚»ãƒ«] [ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. ì—…ë¡œë“œ ì¤‘

**UI ìƒíƒœ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         â³                                   â”‚
â”‚    ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­...                         â”‚
â”‚         60%                                  â”‚
â”‚    â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. ì—…ë¡œë“œ ì™„ë£Œ í›„

**UI ìƒíƒœ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ“ å…¥ç¨¿ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸã€‚        â”‚
â”‚   éŸ“å›½æ‹…å½“è€…ã«é€ä¿¡ã•ã‚Œã¾ã—ãŸã€‚               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚ ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ« (1)                 â”‚
â”‚                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ design_v2.ai  [æ¤œè¨¼å¾…ã¡] [âœ“ å¿…é ˆãƒ‡ãƒ¼ã‚¿] â”‚ â”‚
â”‚ â”‚ å…¥ç¨¿ãƒ‡ãƒ¼ã‚¿ â€¢ 2026/01/09 14:30           â”‚ â”‚
â”‚ â”‚                                  [ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰] [å‰Šé™¤] â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                             â”‚
â”‚ âœ“ å…¥ç¨¿ãƒ‡ãƒ¼ã‚¿ï¼ˆAIï¼‰ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã—ãŸã€‚â”‚
â”‚   è¿½åŠ ã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å ´åˆã¯ã€ä¸Šè¨˜ã®æ‰‹é †  â”‚
â”‚   ã§è¡Œã£ã¦ãã ã•ã„ã€‚                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš ï¸ ë°œê²¬ëœ ë¬¸ì œì  ë° ê¶Œì¥ì‚¬í•­

### 1. AI ì¶”ì¶œ ê¸°ëŠ¥ ëˆ„ë½ âŒ

**ë¬¸ì œ:**
- `/api/ai/extraction` ì—”ë“œí¬ì¸íŠ¸ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ
- íŒŒì¼ ì—…ë¡œë“œ í›„ ìë™ AI ì¶”ì¶œì´ íŠ¸ë¦¬ê±°ë˜ì§€ ì•ŠìŒ
- `files` í…Œì´ë¸”ì˜ `validation_status`ê°€ í•­ìƒ 'PENDING' ìƒíƒœë¡œ ìœ ì§€ë¨

**ì˜í–¥:**
- ì—…ë¡œë“œëœ AI íŒŒì¼ì—ì„œ ì‚¬ì–‘ ì •ë³´ ìë™ ì¶”ì¶œ ë¶ˆê°€
- ìˆ˜ë™ìœ¼ë¡œ ë°ì´í„° ì…ë ¥ í•„ìš”
- í•œêµ­ íŒ€ ê°„ì˜ ìë™í™”ëœ ì›Œí¬í”Œë¡œìš° ì¤‘ë‹¨

**ê¶Œì¥ì‚¬í•­:**
1. AI ì¶”ì¶œ API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„
2. íŒŒì¼ ì—…ë¡œë“œ ì™„ë£Œ í›„ ìë™ ì¶”ì¶œ íŠ¸ë¦¬ê±° ì¶”ê°€
3. ì¶”ì¶œ ê²°ê³¼ë¥¼ `files.validation_results` í•„ë“œì— ì €ì¥
4. ì¶”ì¶œ ì„±ê³µ ì‹œ `validation_status`ë¥¼ 'VALID'ë¡œ ì—…ë°ì´íŠ¸

### 2. í•œêµ­ íŒ€ ì•Œë¦¼ ê¸°ëŠ¥ ëˆ„ë½ âŒ

**ë¬¸ì œ:**
- íŒŒì¼ ì—…ë¡œë“œ í›„ í•œêµ­ íŒ€ìœ¼ë¡œì˜ ìë™ ì´ë©”ì¼ ë°œì†¡ ì—†ìŒ
- UI ë©”ì‹œì§€ì—ì„œëŠ” "éŸ“å›½æ‹…å½“è€…ã«é€ä¿¡ã•ã‚Œã¾ã—ãŸ"ë¼ê³  í‘œì‹œë˜ì§€ë§Œ ì‹¤ì œë¡œëŠ” ì „ì†¡ë˜ì§€ ì•ŠìŒ

**ì˜í–¥:**
- í•œêµ­ íŒ€ì´ ìƒˆ íŒŒì¼ ì—…ë¡œë“œë¥¼ ì¸ì§€í•˜ì§€ ëª»í•¨
- ìˆ˜ë™ìœ¼ë¡œ ì•Œë¦¼ í•„ìš”
- ì—…ë¬´ ì§€ì—° ê°€ëŠ¥ì„±

**ê¶Œì¥ì‚¬í•­:**
1. íŒŒì¼ ì—…ë¡œë“œ ì„±ê³µ í›„ í•œêµ­ íŒ€ ì´ë©”ì¼ ì•Œë¦¼ êµ¬í˜„
2. ì•Œë¦¼ í…œí”Œë¦¿ ì‘ì„± (íŒŒì¼ ì •ë³´, ì£¼ë¬¸ ì •ë³´ í¬í•¨)
3. ì•Œë¦¼ ë°œì†¡ ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ë¡œê¹… ë° ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜

### 3. íŒŒì¼ ì‚­ì œ ê¸°ëŠ¥ ë¯¸êµ¬í˜„ âš ï¸

**ë¬¸ì œ:**
- í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì‚­ì œ ë²„íŠ¼ì´ ì¡´ì¬í•˜ì§€ë§Œ
- `/api/member/orders/[id]/data-receipt/[fileId]` DELETE ì—”ë“œí¬ì¸íŠ¸ê°€ ì—†ìŒ

**ì˜í–¥:**
- ì˜ëª» ì—…ë¡œë“œëœ íŒŒì¼ ì‚­ì œ ë¶ˆê°€
- Storageì— ë¶ˆí•„ìš”í•œ íŒŒì¼ ëˆ„ì 
- ì‚¬ìš©ì ê²½í—˜ ì €í•˜

**ê¶Œì¥ì‚¬í•­:**
1. DELETE ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„
2. Storageì—ì„œ íŒŒì¼ ì‚­ì œ
3. `files` í…Œì´ë¸”ì—ì„œ ë ˆì½”ë“œ ì‚­ì œ
4. ì‚­ì œ ê¶Œí•œ ê²€ì¦ (íŒŒì¼ ì†Œìœ ìë§Œ ì‚­ì œ ê°€ëŠ¥)

### 4. ì§„í–‰ë¥  í‘œì‹œ ì‹œë®¬ë ˆì´ì…˜ âš ï¸

**ë¬¸ì œ:**
- ì—…ë¡œë“œ ì§„í–‰ë¥ ì´ ì‹¤ì œ ì—…ë¡œë“œ ìƒíƒœë¥¼ ë°˜ì˜í•˜ì§€ ì•Šê³  ì‹œë®¬ë ˆì´ì…˜ë¨
- `setInterval`ë¡œ 10%ì”© ì¦ê°€í•˜ëŠ” ê°€ì§œ ì§„í–‰ë¥ 

**ì˜í–¥:**
- ì‹¤ì œ ì—…ë¡œë“œ ì§€ì—° ì‹œ ì •í™•í•œ í”¼ë“œë°± ì œê³µ ë¶ˆê°€
- ëŒ€ìš©ëŸ‰ íŒŒì¼ ì—…ë¡œë“œ ì‹œ ì§„í–‰ë¥ ì´ 90%ì—ì„œ ë©ˆì¶¤

**ê¶Œì¥ì‚¬í•­:**
1. Axios ë˜ëŠ” XMLHttpRequest ì‚¬ìš©í•˜ì—¬ ì‹¤ì œ ì—…ë¡œë“œ ì§„í–‰ë¥  ì¶”ì 
2. `onUploadProgress` ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¡œ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
3. ë˜ëŠ” Supabase Storage ì—…ë¡œë“œ APIì˜ ì§„í–‰ë¥  ì½œë°± í™œìš©

---

## âœ… ìˆ˜ì • ì™„ë£Œëœ í•­ëª© í™•ì¸

### 1. API ë¯¸ë“¤ì›¨ì–´ ì¸ì¦ ë²„ê·¸
- [x] `verifyAuthentication()` í•¨ìˆ˜ì˜ `session.user.id` â†’ `user.id` ìˆ˜ì •
- [x] TypeScript ì»´íŒŒì¼ ì˜¤ë¥˜ í•´ê²°
- [x] ëŸ°íƒ€ì„ ReferenceError ë°©ì§€

### 2. ë°ì´í„° ì˜ìˆ˜ì¦ API ì¸ì¦
- [x] Supabase SSR í´ë¼ì´ì–¸íŠ¸ ì‚¬ìš©
- [x] ì¿ í‚¤ ê¸°ë°˜ ì¸ì¦ êµ¬í˜„
- [x] `getUser()` ë©”ì„œë“œ ì‚¬ìš© (ë³´ì•ˆ ê°•í™”)
- [x] ê°œë°œ ëª¨ë“œ ì§€ì› (`x-user-id` í—¤ë”)

### 3. íŒŒì¼ ë³´ì•ˆ ê²€ì¦
- [x] `quickValidateFile()` í†µí•©
- [x] ë§¤ì§ ë„˜ë²„ ê²€ì¦
- [x] íŒŒì¼ í¬ê¸° ì œí•œ (10MB)
- [x] ì•…ì„± ì½˜í…ì¸  íƒì§€
- [x] ì‹¤í–‰ íŒŒì¼ ì°¨ë‹¨
- [x] ì˜ì‹¬ìŠ¤ëŸ¬ìš´ í™•ì¥ì ì°¨ë‹¨

### 4. ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥
- [x] `files` í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ í™•ì¸
- [x] RLS ì •ì±… í™œì„±í™” í™•ì¸
- [x] íŒŒì¼ ë©”íƒ€ë°ì´í„° ì €ì¥ êµ¬í˜„
- [x] Storage ì—°ë™ í™•ì¸

### 5. í”„ë¡ íŠ¸ì—”ë“œ UI
- [x] íŒŒì¼ ì—…ë¡œë“œ í¼ êµ¬í˜„
- [x] ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì§€ì›
- [x] í´ë¼ì´ì–¸íŠ¸ ì¸¡ íŒŒì¼ ê²€ì¦
- [x] ì§„í–‰ë¥  í‘œì‹œ (ì‹œë®¬ë ˆì´ì…˜)
- [x] ì„±ê³µ/ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
- [x] ì—…ë¡œë“œëœ íŒŒì¼ ëª©ë¡ í‘œì‹œ

---

## ğŸ“ í…ŒìŠ¤íŠ¸ ê²°ê³¼

### í…ŒìŠ¤íŠ¸ ì£¼ë¬¸ ì •ë³´
```
ì£¼ë¬¸ ID: f3fe06f2-9bd0-42bd-aeb9-f91db9e46266
ì‚¬ìš©ì ID: 3b67b1c5-5f88-40d8-998a-436f0f81fac0
ìƒíƒœ: pending
ì´ ê¸ˆì•¡: Â¥162,000
ìƒì„±ì¼: 2026-01-08 05:11:31 UTC
ì—…ë¡œë“œëœ íŒŒì¼: 0ê°œ
```

### ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸
- `files` í…Œì´ë¸” ì¡´ì¬ í™•ì¸ âœ…
- RLS ì •ì±… í™œì„±í™” í™•ì¸ âœ…
- í…ŒìŠ¤íŠ¸ ì£¼ë¬¸ì— ì—°ê²°ëœ íŒŒì¼ ì—†ìŒ âœ…
- `order_data_receipts` í…Œì´ë¸”ì€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ (ì˜ˆìƒëŒ€ë¡œ `files` í…Œì´ë¸” ì‚¬ìš©) âœ…

---

## ğŸ“ ê²°ë¡ 

### ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ëœ ì‚¬í•­
1. **API ë¯¸ë“¤ì›¨ì–´ ì¸ì¦ ë²„ê·¸** - TypeScript ì˜¤ë¥˜ ë° ëŸ°íƒ€ì„ ì—ëŸ¬ í•´ê²°
2. **ë°ì´í„° ì˜ìˆ˜ì¦ API ì¸ì¦** - ì¿ í‚¤ ê¸°ë°˜ ì•ˆì „í•œ ì¸ì¦ êµ¬í˜„
3. **íŒŒì¼ ë³´ì•ˆ ê²€ì¦** - í¬ê´„ì ì¸ ë³´ì•ˆ ê²€ì¦ ì‹œìŠ¤í…œ í†µí•©
4. **ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥** - `files` í…Œì´ë¸”ê³¼ Storage ì—°ë™ ì™„ë£Œ
5. **í”„ë¡ íŠ¸ì—”ë“œ UI** - ì‚¬ìš©ì ì¹œí™”ì  ì—…ë¡œë“œ ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„

### ì¶”ê°€ë¡œ í•„ìš”í•œ ì‘ì—…
1. **AI ì¶”ì¶œ ê¸°ëŠ¥** - `/api/ai/extraction` ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„
2. **í•œêµ­ íŒ€ ì•Œë¦¼** - íŒŒì¼ ì—…ë¡œë“œ í›„ ìë™ ì´ë©”ì¼ ë°œì†¡
3. **íŒŒì¼ ì‚­ì œ ê¸°ëŠ¥** - DELETE ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„
4. **ì‹¤ì œ ì§„í–‰ë¥ ** - ì‹¤ì œ ì—…ë¡œë“œ ì§„í–‰ë¥  ì¶”ì  êµ¬í˜„

### ì „ì²´ í‰ê°€
- **í˜„ì¬ ìƒíƒœ:** íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥ì˜ í•µì‹¬ ì¸í”„ë¼ëŠ” ì™„ì „íˆ ìˆ˜ì •ë˜ì—ˆìœ¼ë©° ì•ˆì „í•˜ê²Œ ì‘ë™í•©ë‹ˆë‹¤.
- **ë³´ì•ˆ:** ê°•ë ¥í•œ íŒŒì¼ ë³´ì•ˆ ê²€ì¦ê³¼ ì¸ì¦ ë©”ì»¤ë‹ˆì¦˜ìœ¼ë¡œ ë³´ì•ˆ ìˆ˜ì¤€ì´ ë†’ìŠµë‹ˆë‹¤.
- **ì‚¬ìš©ì ê²½í—˜:** ì§ê´€ì ì¸ UIì™€ ëª…í™œí•œ í”¼ë“œë°±ìœ¼ë¡œ ì‚¬ìš©ì ê²½í—˜ì´ ìš°ìˆ˜í•©ë‹ˆë‹¤.
- **í™•ì¥ì„±:** AI ì¶”ì¶œ ë° ì•Œë¦¼ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê¸° ìœ„í•œ ê¸°ë°˜ì´ ë§ˆë ¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

### ê´€ë ¨ íŒŒì¼
1. `/src/lib/api-middleware.ts` - API ì¸ì¦ ë¯¸ë“¤ì›¨ì–´
2. `/src/app/api/member/orders/[id]/data-receipt/route.ts` - íŒŒì¼ ì—…ë¡œë“œ API
3. `/src/app/member/orders/[id]/OrderFileUploadSection.tsx` - ì—…ë¡œë“œ UI ì»´í¬ë„ŒíŠ¸
4. `/src/lib/file-validator/security-validator.ts` - íŒŒì¼ ë³´ì•ˆ ê²€ì¦ ë¼ì´ë¸ŒëŸ¬ë¦¬

### ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
- `/docs/current/architecture/database-schema-v2.md` - ì „ì²´ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë¬¸ì„œ

### Supabase Tables
- `files` - íŒŒì¼ ë©”íƒ€ë°ì´í„° ì €ì¥
- `orders` - ì£¼ë¬¸ ì •ë³´
- `profiles` - ì‚¬ìš©ì í”„ë¡œí•„
- Storage: `production-files` - íŒŒì¼ ì €ì¥ì†Œ

---

**ë³´ê³ ì„œ ì‘ì„± ì™„ë£Œ: 2026-01-09**
**ê²€ì¦ ìƒíƒœ: âœ… PASSED (ìˆ˜ì • ì™„ë£Œ ë° ê²€ì¦ë¨)**
