# ì„¤ê³„ì„œ(url.md) ê²€ì¦ ì¢…í•© ë³´ê³ ì„œ

**ê²€ì¦ì¼**: 2026-01-06
**ê²€ì¦ ë°©ì‹**: 5ê°œ ë³‘ë ¬ ì—ì´ì „íŠ¸ ë¶„ì„
**ëŒ€ìƒ ë¬¸ì„œ**: `docs/reports/url.md` (v2.0)

---

## ğŸ“Š ì‹¤í–‰ ìš”ì•½

### ë³‘ë ¬ ì—ì´ì „íŠ¸ ê²€ì¦ ê²°ê³¼

| ì—ì´ì „íŠ¸ | ê²€ì¦ í•­ëª© | ì ìˆ˜ | ìƒíƒœ |
|----------|----------|------|------|
| Agent #1 | Supabase MCP ì„¹ì…˜ | 5.5/10 | âš ï¸ ë¶ˆì™„ì „ |
| Agent #2 | ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ | 6/10 | âš ï¸ ì˜¤ë¥˜ í¬í•¨ |
| Agent #3 | API ì—”ë“œí¬ì¸íŠ¸ | 7.5/10 | âš ï¸ ë¶€ë¶„ ì™„ë£Œ |
| Agent #4 | í˜ì´ì§€-ë²„íŠ¼ ì—°ê²° | 8.5/10 | âœ… ì–‘í˜¸ |
| Agent #5 | ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ | 6/10 | âš ï¸ ê¸°ë³¸ ìˆ˜ì¤€ |

---

## ğŸš¨ ì£¼ìš” ë°œê²¬ì‚¬í•­

### 1. FALSE CRITICAL ERRORS (ê°€ì¥ ì‹¬ê°í•œ ë¬¸ì œ)

#### Error #1: contracts.user_id ì»¬ëŸ¼

**ì„¤ê³„ì„œ ì£¼ì¥** (lines 1281-1328):
> contracts í…Œì´ë¸”ì— user_id ì»¬ëŸ¼ì´ ì—†ìŒ

**ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ í˜„í™©**:
```sql
"column_name":"user_id","data_type":"uuid","is_nullable":"YES"
```

**ê²°ë¡ **: âœ… **FALSE POSITIVE** - ì»¬ëŸ¼ì´ ì¡´ì¬í•¨
- `contracts.order_id` â†’ `orders.id` (FK)
- `contracts.user_id` â†’ `auth.users(id)` (FK)
- ì¸ë±ìŠ¤: `idx_contracts_user_id` ì¡´ì¬
- íŠ¸ë¦¬ê±°: 2ê°œ (ìë™ ë™ê¸°í™”)

#### Error #3: admin_notifications í…Œì´ë¸”

**ì„¤ê³„ì„œ ì£¼ì¥** (lines 1410-1457):
> admin_notifications í…Œì´ë¸”ì´ ì—†ìŒ

**ì‹¤ì œ ë°ì´í„°ë² ì´ìŠ¤ í˜„í™©**:
- âœ… í…Œì´ë¸” ì¡´ì¬ (14ì»¬ëŸ¼)
- âœ… ì¸ë±ìŠ¤ 8ê°œ
- âœ… RLS ì •ì±… 4ê°œ
- âœ… FK: `user_id` â†’ `profiles.id`

**ê²°ë¡ **: âœ… **FALSE POSITIVE** - í…Œì´ë¸”ì´ ì™„ì „íˆ êµ¬í˜„ë¨

### 2. Supabase MCP ì„¹ì…˜ ë¬¸ì œì 

#### ëˆ„ë½ëœ MCP ë„êµ¬ (20+ê°œ ì¤‘ 5ê°œë§Œ ë¬¸ì„œí™”)

| ë„êµ¬ | ìƒíƒœ | ë¹„ê³  |
|------|------|------|
| execute_sql | âœ… ë¬¸ì„œí™”ë¨ | ê¸°ë³¸ ì„¤ëª…ë§Œ ìˆìŒ |
| apply_migration | âœ… ë¬¸ì„œí™”ë¨ | íŒŒë¼ë¯¸í„° ìƒì„¸ ëˆ„ë½ |
| list_tables | âœ… ë¬¸ì„œí™”ë¨ | ì‚¬ìš© ì˜ˆì œ ì—†ìŒ |
| list_migrations | âœ… ë¬¸ì„œí™”ë¨ | ì‚¬ìš© ì˜ˆì œ ì—†ìŒ |
| get_advisors | âœ… ë¬¸ì„œí™”ë¨ | ì‚¬ìš© ì˜ˆì œ ì—†ìŒ |
| list_edge_functions | âŒ ëˆ„ë½ | |
| deploy_edge_function | âŒ ëˆ„ë½ | |
| get_logs | âŒ ëˆ„ë½ | |
| get_project_url | âŒ ëˆ„ë½ | |
| get_publishable_keys | âŒ ëˆ„ë½ | |
| generate_typescript_types | âŒ ëˆ„ë½ | |
| create_branch | âŒ ëˆ„ë½ | |
| list_branches | âŒ ëˆ„ë½ | |
| merge_branch | âŒ ëˆ„ë½ | |
| reset_branch | âŒ ëˆ„ë½ | |
| delete_branch | âŒ ëˆ„ë½ | |
| rebase_branch | âŒ ëˆ„ë½ | |
| search_docs | âŒ ëˆ„ë½ | |

#### ì˜ëª»ëœ ì½”ë“œ ì˜ˆì œ

```typescript
// âŒ ì„¤ê³„ì„œì— ìˆëŠ” ì˜ˆì œ (ë™ì‘í•˜ì§€ ì•ŠìŒ)
import { executeSQL } from '@/mcp';
const result = await executeSQL(`SELECT * FROM profiles`);

// âœ… ì‹¤ì œ MCP ë„êµ¬ í˜¸ì¶œ ë°©ì‹
// MCP ë„êµ¬ëŠ” í”„ë¡œí† ì½œì„ í†µí•´ ì§ì ‘ í˜¸ì¶œë˜ë©°,
// TypeScript import ë˜í¼ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠìŒ
```

### 3. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë¬¸ì„œí™” ë¶€ì¡±

#### í…Œì´ë¸” ë¬¸ì„œí™” í˜„í™©

| ì¹´í…Œê³ ë¦¬ | ë¬¸ì„œí™”ë¨ | ì‹¤ì œ ì¡´ì¬ | ë¹„ìœ¨ |
|----------|----------|----------|------|
| Core Tables | 7ê°œ | 7ê°œ | 100% |
| ì „ì²´ í…Œì´ë¸” | 7ê°œ | **33ê°œ** | **21%** |

**ëˆ„ë½ëœ 26ê°œ í…Œì´ë¸”**:
1. announcements
2. billing_addresses
3. companies
4. contract_reminders
5. design_revisions
6. files
7. inventory
8. inventory_transactions
9. korea_corrections
10. korea_transfer_log
11. notifications
12. order_status_history
13. password_reset_tokens
14. payment_confirmations
15. production_orders
16. quotation_items
17. sample_items
18. shipment_tracking_events
19. shipments
20. stage_action_history
21. (ê¸°íƒ€ 6ê°œ)

#### ì™¸ë˜ í‚¤ ê´€ê³„

| í•­ëª© | ë¬¸ì„œí™”ë¨ | ì‹¤ì œ ì¡´ì¬ |
|------|----------|----------|
| FK ê´€ê³„ | 19ê°œ | **33ê°œ** |
| ëˆ„ë½ëœ FK | - | 14ê°œ |

### 4. API ì—”ë“œí¬ì¸íŠ¸ ë¬¸ì„œí™” ë¶€ì¡±

#### ë¬¸ì„œí™” í˜„í™©

| ì¹´í…Œê³ ë¦¬ | ë¬¸ì„œí™”ë¨ | ì‹¤ì œ ì¡´ì¬ | ë¹„ìœ¨ |
|----------|----------|----------|------|
| Public APIs | 10ê°œ | ~35ê°œ | 29% |
| Member APIs | 45ê°œ | ~62ê°œ | 73% |
| Admin APIs | 15ê°œ | ~45ê°œ | 33% |
| B2B APIs | 20ê°œ | ~28ê°œ | 71% |
| **ì „ì²´** | **100ê°œ** | **~177ê°œ** | **56%** |

**77ê°œ ëˆ„ë½ëœ API ì—”ë“œí¬ì¸íŠ¸**:
- `/api/shipments/*` (6ê°œ)
- `/api/signature/*` (5ê°œ)
- `/api/contract/*` (4ê°œ)
- `/api/admin/production/*` (4ê°œ)
- `/api/admin/inventory/*` (6ê°œ)
- `/api/member/addresses/*` (4ê°œ)
- `/api/ai-parser/*` (6ê°œ)
- `/api/files/*` (3ê°œ)
- (ê¸°íƒ€ 39ê°œ)

#### ì¸ì¦ ë°©ë²• ë¬¸ì„œí™” ë¶€ì¡±

**ì„¤ê³„ì„œ ë¬¸ì œì **:
- ê° APIì˜ ì¸ì¦ ë°©ë²•ì´ ëª…ì‹œë˜ì§€ ì•ŠìŒ
- Cookie-based vs Bearer Token vs Service Role êµ¬ë¶„ ì—†ìŒ
- DEV_MODE bypass (`x-user-id` header) ì–¸ê¸‰ ì—†ìŒ

### 5. ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ ë¶€ì¡±

#### ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ìˆ˜

| í•­ëª© | ì„¤ê³„ì„œ | ì‹¤ì œ | ì°¨ì´ |
|------|--------|------|------|
| ë§ˆì´ê·¸ë ˆì´ì…˜ ìˆ˜ | 35ê°œ | **39ê°œ** | **-4ê°œ** |

**4ê°œ ëˆ„ë½ëœ ë§ˆì´ê·¸ë ˆì´ì…˜**:
1. `20251231000005_create_spec_sheet_revisions.sql`
2. `20251231000006_delivery_tracking.sql`
3. `20250105_premium_downloads_table.sql`
4. `20260105000002_create_external_order_functions.sql`

#### ì‹¤í–‰ ìˆœì„œ ë¬¸ì„œí™” ë¶€ì¡±

**ëˆ„ë½ëœ ë‚´ìš©**:
- ë§ˆì´ê·¸ë ˆì´ì…˜ ê°„ ì˜ì¡´ì„± ë§µ
- í•„ìˆ˜ ì‹¤í–‰ ìˆœì„œ
- critical path ì‹ë³„
- rollback ì ˆì°¨

---

## âœ… ì–‘í˜¸í•œ ë¶€ë¶„

### 1. í˜ì´ì§€-ë²„íŠ¼ ì—°ê²° (8.5/10)

- **82í˜ì´ì§€ ëª¨ë‘ ì‹ë³„** âœ…
- **76% ë²„íŠ¼ í”Œë¡œìš° ë¬¸ì„œí™”** âœ…
- **API ì—”ë“œí¬ì¸íŠ¸ ì—°ê²° ëª…í™•** âœ…
- **ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ì—°ê²° ëª…í™•** âœ…

**íŠ¹íˆ ìš°ìˆ˜í•œ ì„¹ì…˜**:
- í™ˆí˜ì´ì§€ CTAs (ì •í™•ë„ 100%)
- Member Dashboard (ì •í™•ë„ 100%)
- ìƒ˜í”Œ ìš”ì²­ í”Œë¡œìš° (ì •í™•ë„ 100%)

### 2. í•µì‹¬ í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ (7ê°œ í…Œì´ë¸”)

- **profiles**: 8/10 (ì¼ë¶€ ì‹ ê·œ ì»¬ëŸ¼ ëˆ„ë½)
- **orders**: 7/10 (ì¼ë¶€ ì¸ë±ìŠ¤ ëˆ„ë½)
- **quotations**: 7/10 (ì¼ë¶€ ì¸ë±ìŠ¤ ëˆ„ë½)
- **sample_requests**: 8/10 (ì •í™•í•¨)
- **products**: 9/10 (ìš°ìˆ˜í•¨)

### 3. í•µì‹¬ API ì—”ë“œí¬ì¸íŠ¸ (100ê°œ)

- **POST /api/contact**: ì •í™•ë„ 10/10
- **GET /api/products**: ì •í™•ë„ 10/10
- **POST /api/samples/request**: ì •í™•ë„ 10/10
- **GET /api/member/orders**: ì •í™•ë„ 10/10
- **POST /api/quotations/submit**: ì •í™•ë„ 10/10

---

## ğŸ¯ ê°œì„  ìš°ì„ ìˆœìœ„

### Priority 1: ì¦‰ì‹œ ìˆ˜ì • (ì˜¤ëŠ˜)

1. **FALSE ERROR ì œê±°** (lines 1281-1328, 1410-1457)
   - âŒ Error #1 (contracts.user_id) ì„¹ì…˜ ì‚­ì œ
   - âŒ Error #3 (admin_notifications) ì„¹ì…˜ ì‚­ì œ

2. **Supabase MCP ë„êµ¬ ëª©ë¡ ì™„ì„±**
   - 20+ ë„êµ¬ ì „ì²´ ëª©ë¡ ì¶”ê°€
   - íŒŒë¼ë¯¸í„°/ë°˜í™˜ê°’ ë¬¸ì„œí™”
   - ì‹¤ì œ ì‚¬ìš© ì˜ˆì œ ì¶”ê°€

### Priority 2: ì´ë²ˆ ì£¼ (í•„ìˆ˜)

3. **ëˆ„ë½ëœ 26ê°œ í…Œì´ë¸” ì¶”ê°€**
   - ìµœì†Œ: í…Œì´ë¸”ëª… + ì»¬ëŸ¼ëª… ëª©ë¡
   - ê¶Œì¥: ì „ì²´ CREATE TABLE ë¬¸

4. **77ê°œ ëˆ„ë½ëœ API ì¶”ê°€**
   - HTTP ë©”ì„œë“œ, URL, ì¸ì¦ ìš”êµ¬ì‚¬í•­
   - ìš”ì²­/ì‘ë‹µ ìŠ¤í‚¤ë§ˆ
   - ì‚¬ìš© ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”

5. **ë§ˆì´ê·¸ë ˆì´ì…˜ ì¹´ìš´íŠ¸ ìˆ˜ì •**
   - 35 â†’ 39ë¡œ ì—…ë°ì´íŠ¸
   - 4ê°œ ëˆ„ë½ íŒŒì¼ ì¶”ê°€

### Priority 3: ë‹¤ìŒ ìŠ¤í”„ë¦°íŠ¸

6. **ì¸ì¦ ë°©ë²• ë¬¸ì„œí™”**
   - ê° APIì˜ ì¸ì¦ íƒ€ì… ëª…ì‹œ
   - DEV_MODE bypass ë¬¸ì„œí™”
   - Token ë§Œë£Œ ì •ì±…

7. **ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ ìˆœì„œ**
   - ì˜ì¡´ì„± ê·¸ë˜í”„ ì¶”ê°€
   - í•„ìˆ˜ ì„ í–‰ ì¡°ê±´ ëª…ì‹œ
   - Rollback ì ˆì°¨

8. **RLS ì •ì±… ë¬¸ì„œí™”**
   - 126ê°œ ì •ì±… ëª©ë¡
   - ì•¡ì„¸ìŠ¤ ì œì–´ ë¡œì§ ì„¤ëª…

---

## ğŸ“ ìˆ˜ì • í•„ìš” ì„¹ì…˜

| ë¼ì¸ | ì„¹ì…˜ | ë¬¸ì œ | ìš°ì„ ìˆœìœ„ |
|------|------|------|----------|
| 1281-1328 | Error #1 | FALSE POSITIVE | P1 |
| 1410-1457 | Error #3 | FALSE POSITIVE | P1 |
| 1562-1707 | Supabase MCP | 75% ë„êµ¬ ëˆ„ë½ | P1 |
| 1569 | Migration count | 35 â†’ 39 í•„ìš” | P2 |
| ì „ì²´ | Database tables | 26ê°œ ëˆ„ë½ | P2 |
| ì „ì²´ | API endpoints | 77ê°œ ëˆ„ë½ | P2 |

---

## ğŸ”§ ê¶Œì¥ ìˆ˜ì • ì‘ì—…

### 1. Supabase MCP ì„¹ì…˜ ì™„ì „ ì¬ì‘ì„±

**ì¶”ê°€í•  ë‚´ìš©**:
```markdown
## Supabase MCP ë„êµ¬ ì „ì²´ ëª©ë¡ (20+)

### ë°ì´í„°ë² ì´ìŠ¤ ìš´ì˜ (5ê°œ)
- execute_sql: SQL ì§ì ‘ ì‹¤í–‰
- apply_migration: ë§ˆì´ê·¸ë ˆì´ì…˜ ì ìš©
- list_tables: í…Œì´ë¸” ëª©ë¡
- list_migrations: ë§ˆì´ê·¸ë ˆì´ì…˜ ë‚´ì—­
- get_advisors: ì„±ëŠ¥/ë³´ì•ˆ ê¶Œê³ 

### ë¸Œëœì¹˜ ê´€ë¦¬ (6ê°œ)
- create_branch: ê°œë°œ ë¸Œëœì¹˜ ìƒì„±
- list_branches: ë¸Œëœì¹˜ ëª©ë¡
- merge_branch: ë¸Œëœì¹˜ ë³‘í•©
- reset_branch: íŠ¹ì • ë§ˆì´ê·¸ë ˆì´ì…˜ìœ¼ë¡œ ë¦¬ì…‹
- delete_branch: ë¸Œëœì¹˜ ì‚­ì œ
- rebase_branch: í”„ë¡œë•ì…˜ìœ¼ë¡œ ë¦¬ë² ì´ìŠ¤

### Edge Functions (3ê°œ)
- list_edge_functions: í•¨ìˆ˜ ëª©ë¡
- get_edge_function: í•¨ìˆ˜ ì†ŒìŠ¤ ì¡°íšŒ
- deploy_edge_function: í•¨ìˆ˜ ë°°í¬

### ëª¨ë‹ˆí„°ë§ (3ê°œ)
- get_logs: ì„œë¹„ìŠ¤ ë¡œê·¸ ì¡°íšŒ
- get_advisors: ê¶Œê³ ì‚¬í•­ ì¡°íšŒ
- search_docs: ë¬¸ì„œ ê²€ìƒ‰

### í”„ë¡œì íŠ¸ ìœ í‹¸ë¦¬í‹° (3ê°œ)
- get_project_url: í”„ë¡œì íŠ¸ URL
- get_publishable_keys: API í‚¤ ëª©ë¡
- generate_typescript_types: íƒ€ì… ìƒì„±
```

### 2. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ í™•ì¥

**ì¶”ê°€í•  26ê°œ í…Œì´ë¸”**:
```markdown
### ëˆ„ë½ëœ í…Œì´ë¸” (26ê°œ)

#### announcements
```sql
CREATE TABLE announcements (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  title TEXT NOT NULL,
  content TEXT NOT NULL,
  category TEXT CHECK (category IN ('maintenance', 'update', 'notice', 'promotion')),
  priority TEXT DEFAULT 'medium' CHECK (priority IN ('low', 'medium', 'high')),
  is_published BOOLEAN DEFAULT FALSE,
  published_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

#### billing_addresses
...
```

### 3. API ì—”ë“œí¬ì¸íŠ¸ ì™„ì„±

**ì¶”ê°€í•  77ê°œ ì—”ë“œí¬ì¸íŠ¸**:
```markdown
### ëˆ„ë½ëœ API ì—”ë“œí¬ì¸íŠ¸ (77ê°œ)

#### Shipments (6ê°œ)
- POST /api/shipments/create
  - Auth: Service Role
  - DB: shipments, orders
  - Body: { order_id, carrier_code, tracking_number }
  - Response: { success, data: shipment }

- GET /api/shipments/[id]/track
  - Auth: Cookie (member)
  - DB: shipments, shipment_tracking_events
  - Response: { success, data: { shipment, tracking_events } }
...
```

---

## ğŸ“Š ìµœì¢… í‰ê°€

### ì „ì²´ ì ìˆ˜: 6.7/10

| í‰ê°€ ê¸°ì¤€ | ì ìˆ˜ | ë¹„ê³  |
|----------|------|------|
| **ì™„ì„±ë„** | 5/10 | 21% í…Œì´ë¸”, 56% API ë¬¸ì„œí™” |
| **ì •í™•ì„±** | 7/10 | FALSE ERROR 2ê°œ í¬í•¨ |
| **ì‚¬ìš©ì„±** | 7/10 | í•µì‹¬ í”Œë¡œìš°ëŠ” ì–‘í˜¸ |
| **MCP ê°€ì´ë“œ** | 3/10 | ë„êµ¬ ëª©ë¡ ë¶ˆì™„ì „ |
| **êµ¬ì¡°** | 9/10 | ëª©ì°¨, ì¡°ì§ ìš°ìˆ˜ |

### ê°•ì  âœ…
- í˜ì´ì§€ ëª©ë¡ ì™„ì „ (82/82)
- ë²„íŠ¼ í”Œë¡œìš° ìƒì„¸ (76%)
- í•µì‹¬ API ì •í™• (100ê°œ)
- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ëª…í™•

### ì•½ì  âŒ
- FALSE CRITICAL ERRORS 2ê°œ
- 75% MCP ë„êµ¬ ëˆ„ë½
- 26ê°œ í…Œì´ë¸” ë¯¸ë¬¸ì„œí™”
- 77ê°œ API ëˆ„ë½
- ì¸ì¦ ë°©ë²• ë¯¸ìƒì„¸

---

## ğŸ¯ ê²°ë¡ 

**ì„¤ê³„ì„œëŠ” "ê¸°ë³¸ ì°¸ê³ ìš©"ìœ¼ë¡œëŠ” ì í•©í•˜ì§€ë§Œ, "ì™„ì „í•œ ê¸°ìˆ  ë¬¸ì„œ"ë¡œëŠ” ë¶€ì¡±í•©ë‹ˆë‹¤.**

### ì‚¬ìš© ê°€ëŠ¥ì„±
- âœ… **í˜ì´ì§€/ë„¤ë¹„ê²Œì´ì…˜ ì°¸ê³ **: ê°€ëŠ¥
- âœ… **í•µì‹¬ API ê°œë°œ**: ê°€ëŠ¥ (100ê°œ)
- âš ï¸ **ì „ì²´ API ê°œë°œ**: ë¶€ì¡± (77ê°œ ëˆ„ë½)
- âŒ **ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì°¸ê³ **: ìœ„í—˜ (FALSE ERROR í¬í•¨)
- âŒ **MCP ë„êµ¬ ì‚¬ìš© ê°€ì´ë“œ**: ë¶€ì¡± (75% ëˆ„ë½)

### ê¶Œì¥ì‚¬í•­
1. **ì¦‰ì‹œ**: FALSE ERROR 2ê°œ ì œê±°
2. **ì´ë²ˆ ì£¼**: ëˆ„ë½ëœ í…Œì´ë¸”/API ì¶”ê°€
3. **ë‹¤ìŒ ìŠ¤í”„ë¦°íŠ¸**: MCP ë„êµ¬ ì™„ì „ ë¬¸ì„œí™”

---

**ë³´ê³ ì„œ ìƒì„±ì¼**: 2026-01-06
**ê²€ì¦ ë„êµ¬**: 5ê°œ ë³‘ë ¬ ì—ì´ì „íŠ¸
**ì´ ê²€ì¦ ì‹œê°„**: ì•½ 3ë¶„
