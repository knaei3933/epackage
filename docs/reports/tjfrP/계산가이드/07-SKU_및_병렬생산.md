# 08. SKU概念と並列生産

> **対象**: SKU（Stock Keeping Unit）別原価計算と並列生産最適化
> **更新日**: 2026-01-17

---

> **Navigation**: [← Prev: 06. マージン計算](./06-마진_및_최종가격.md) | [🏠 Home](./00-README.md) | [Next: 08. シナリオ別計算 (KR) →](./08-비즈니스_시나리오_모음.md)

---

## 1. SKUとは

### 1-1. 定義

**SKU（Stock Keeping Unit）** = 在庫管理単位

このシステムにおけるSKUは、**異なるデザイン/柄を持つパウチ**を表します。

| SKU数 | 説明 | 例 |
|-------|------|------|
| **1 SKU** | 1つのデザイン | チョコ味パウチのみ |
| **2 SKU** | 2つの異なるデザイン | チョコ味 + ストロベリー味 |
| **3 SKU** | 3つの異なるデザイン | チョコ + ストロベリー + 抹茶味 |

### 1-2. SKUの使用場面

- **フレーバーバリエーション**: 同じサイズで異なる味/デザイン
- **パッケージデザイン**: 同じ製品で異なるラベルデザイン
- **言語バージョン**: 同じ製品で日本語版・英語版
- **プロモーション**: 通常版 + 限定版デザイン

---

## 2. SKU別原価計算ルール

### 2-1. 最小確保量ルール

SKU数に応じて、フィルムの最小確保量が異なります。

| SKU数 | 各SKUの最小確保量 | 固定ロス | 総フィルム量（2 SKU例） |
|-------|------------------|----------|---------------------|
| **1 SKU** | 500m | 400m | 500m + 400m = **900m** |
| **2 SKU** | 各300m | 400m | 300m×2 + 400m = **1000m** |
| **3 SKU** | 各300m | 400m | 300m×3 + 400m = **1300m** |
| **4 SKU** | 各300m | 400m | 300m×4 + 400m = **1600m** |

> **重要**: ロス（損失）は**400m固定**で、SKU数に関わらず一定です。
>
> **理由**: 1種類（1 SKU）のデザインを印刷する場合でも、100種類（100 SKU）のデザインを印刷する場合でも、セットアップロスは400mで一定。追加SKUに対するロスは発生しません。

### 2-2. ロスの概念

```
ロス = 400m（固定、SKU数に関わらず）
```

| SKU数 | ロス | 説明 |
|-------|------|------|
| 1 SKU | 400m | 1種類のデザイン印刷時のセットアップロス |
| 2 SKU | 400m | 2種類のデザイン印刷時もロスは400m（追加SKUに対するロスなし） |
| 100 SKU | 400m | 100種類のデザイン印刷時もロスは400m |

> **結論**: 追加SKUを増やしてもロスは増えないため、多SKU注文ほど効率的です。

### 2-3. 確保量計算フロー

```
1. 理論メートル数計算
   ↓
2. 最小確保量適用（1 SKU: 500m、2+ SKU: 各300m）
   ↓
3. 50m単位で切り上げ（最小確保量超過時のみ）
   ↓
4. 総確保量を集計（各SKUの確保量を合計）
   ↓
5. ロス追加（400m固定、SKU数に関わらず）
   ↓
6. 総メートル数確定
```

**例**: 2 SKUで各500個注文（ピッチ120mm）

```
理論メートル数 = 500個 ÷ (1000 ÷ 120) = 60m

SKU 1:
  - 最小確保量: 300m（2+ SKUルール）
  - 確保量: 300m（60m < 300mのため最小量適用）
  - 総計: 300m

SKU 2:
  - 最小確保量: 300m（2+ SKUルール）
  - 確保量: 300m（60m < 300mのため最小量適用）
  - 総計: 300m

合計確保量: 300m + 300m = 600m
ロス: 400m（固定）
総フィルム: 600m + 400m = 1000m
```

> **重要**: 各SKUにロスを配分するのではなく、**総確保量に対して400mロスを追加**します。

---

## 3. 並列生産（Parallel Production）

### 3-1. 並列生産とは

**並列生産**は、1つの原反から複数のロール（またはパウチ）を同時に生産する手法です。

> **対象製品**: ロールフィルム、合掌袋（T-shape）、ボックスパウチ（M-shape）

### 3-2. 原反幅と並列本数

利用可能な原反幅と並列生産の組み合わせ：

| 原反幅 | 印刷可能幅 | 最大並列本数（例: 200mm幅） |
|--------|-----------|--------------------------|
| **590mm** | 570mm | 2本（570 ÷ 200 = 2.85 → 2本） |
| **760mm** | 740mm | 3本（740 ÷ 200 = 3.7 → 3本） |

> **注**: 印刷可能幅 = 原反幅 - 20mm（両端10mmずつ余白）

### 3-3. 並列生産の効率化

**フィルム使用量の削減**:

並列本数分だけフィルム長が短縮されます。

```
単価 = 総コスト / 総長（m）
並列生産単価 = 基本単価 × (0.6 + 0.4/並列本数)
```

**例**: 200mm幅ロールフィルム、500m注文

| 並列本数 | 原反幅 | 総フィルム長 | 効率 | 単価節減率 |
|----------|--------|-------------|------|-----------|
| 1本 | 590mm | 900m | 34% | - |
| 2本 | 590mm | 450m | 68% | 約20% |
| 3本 | 760mm | 300m | 81% | 約27% ⭐推奨 |

---

## 4. SKU別原価計算の実装

### 4-1. データ構造

```typescript
interface SKUQuantity {
  quantities: number[];      // 各SKUの数量 [500, 500, 500]
  names?: string[];          // 各SKUのデザイン名（任意）
}

// 計算パラメータ
interface SKUCostParams {
  skuQuantities: number[];   // [500, 500] for 2 SKUs
  dimensions: {
    width: number;           // パウチ横（mm）
    height: number;          // パウチ縦（mm）
    depth?: number;          // マチ（mm）
  };
  materialId: string;        // 素材ID
  thicknessSelection: string; // 厚さ選択
  pouchType: string;         // パウチタイプ
}
```

### 4-2. 計算結果構造

```typescript
interface SKUCostResult {
  totalCostJPY: number;      // 総原価（円）
  costPerSKU: {
    skuIndex: number;        // SKU番号（0, 1, 2...）
    quantity: number;        // 数量
    theoreticalMeters: number; // 理論メートル数
    securedMeters: number;   // 確保量
    totalMeters: number;     // 確保量（ロスなし）
    costJPY: number;         // 原価（円）
  }[];
  summary: {
    totalSecuredMeters: number; // 総確保量（各SKUの合計）
    lossMeters: number;        // ロス（400m固定）
    totalWithLossMeters: number; // 総フィルム量（確保量 + ロス）
  };
}
```

---

## 5. UI機能

### 5-1. SKU数選択

- **1-5 SKU**: クイック選択ボタン
- **6-100 SKU**: カスタム数値入力

### 5-2. 数量入力

**2つのモード**:

1. **標準ビュー（1-10 SKU）**: グリッドレイアウト
2. **コンパクトビュー（11-100 SKU）**: テーブル + ページネーション

### 5-3. 一括操作

- **クイックパターン**: 100, 500, 1000, 2000, 5000, 10000
- **カスタム数量**: 任意の数量を全SKUに適用
- **SKUコピー**: 既存SKUをコピーして新しいSKUを追加

### 5-4. デザイン名

各SKUに任意でデザイン名を設定可能（例: チョコ味、ストロベリー味）

---

## 6. 計算例

### 6-1. 例1: 2 SKU 各500個

**条件**: 120×180mm平袋、PET/AL/LLDPE構成

| 項目 | SKU 1（チョコ味） | SKU 2（ストロベリー味） | 合計 |
|------|------------------|----------------------|------|
| 数量 | 500個 | 500個 | 1000個 |
| 理論メートル | 60m | 60m | 120m |
| 最小確保量 | 300m | 300m | 600m |
| **総確保量** | **300m** | **300m** | **600m** |
| **ロス** | **-** | **-** | **400m（固定）** |
| **総フィルム** | **-** | **-** | **1000m** |

> **重要**: ロス400mはSKU数で分割されず、総確保量600mに追加されて総フィルムは1000mとなります。

### 6-2. 例2: 並列生産（ロールフィルム）

**条件**: 200mm幅ロールフィルム、500m×2本注文

| オプション | 並列本数 | 原反幅 | 総フィルム長 | フィルム効率 | 単価節減 |
|-----------|----------|--------|-------------|-------------|----------|
| オプション1 | 1本 | 590mm | 900m | 34% | - |
| オプション2 | 2本 | 590mm | 450m | 68% | -20% |
| オプション3 ⭐ | 3本 | 760mm | 300m | 81% | -27% |

---

## 7. 関連ファイル

| ファイル | 説明 |
|---------|------|
| `src/lib/pouch-cost-calculator.ts` | SKU別原価計算エンジン |
| `src/components/quote/SKUSelectionStep.tsx` | SKU選択UIコンポーネント |
| `src/components/quote/UnifiedSKUQuantityStep.tsx` | 統合SKU数量UI（最大100 SKU対応） |
| `src/contexts/QuoteContext.tsx` | SKU状態管理 |

---

## 8. 次のステップ

SKU概念を理解したら、次のドキュメントで具体的な計算方法を確認してください：

- [`08-비즈니스_시나리오_모음.md`](./08-비즈니스_시나리오_모음.md) - 다양한 シナリオ計算例시 (Korean)

> [Next: 08. シナリオ別計算 (KR) →](./08-비즈니스_시나리오_모음.md)

---

**更新日**: 2026-01-17
**バージョン**: 1.0
