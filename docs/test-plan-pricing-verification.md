# 価格設定反映テスト計画

作成日: 2026-02-17
目的: 管理者設定の変更が見積もりシミュレーターに正しく反映されているか確認

---

## 🧪 テスト項目

### 1. 顧客別割引率テスト（最重要）

| 項目 | 期待値 | 確認方法 |
|------|--------|---------|
| arwg22@gmail.com の割引率 | -0.1 (10%割引) | コンソールログ確認 |
| 最終価格への反映 | 価格が10%下がっている | 見積もり結果比較 |
| markupApplied 情報 | `rate: -0.1` | コンソールログ確認 |

### 2. 管理者設定反映テスト

| 設定項目 | 確認方法 |
|---------|---------|
| フィルム材料価格 | PET_unit_price 変更→価格反映 |
| 印刷版代 | digital_setup_fee 変更→価格反映 |
| ラミネーション | cost_per_m2 変更→価格反映 |

---

## 📋 テスト手順

### ステップ1: サイトにアクセス
```
URL: https://www.package-lab.com/quote-simulator
```

### ステップ2: コンソールログを確認
開発者ツールを開いて、以下のログを確認：
- `[handleNext] Customer markup rate: -0.1`
- `[100円丸め]` 丸め計算ログ

### ステップ3: 見積もりを作成
1. 三方パウチ (flat_3_side)
2. PET/AL 構造
3. サイズ: 150mm x 200mm
4. 数量: 1000個
5. 印刷: デジタル 1色

### ステップ4: 価格確認
- 顧客別割引が適用されているか
- markupApplied 情報が正しいか

---

## 🔍 期待されるコンソールログ

```
[handleNext] Customer markup rate: -0.1
[UnifiedPricingEngine] Settings loaded
[100円丸め] 丸め前 totalPrice: XXXXX
[100円丸め] 丸め後 roundedTotalPrice: XXXXX
```

---

## ✅ 成功判定基準

1. 顧客別割引率がログに表示される
2. 最終価格が10%割引されている
3. markupApplied に正しい値が設定されている
