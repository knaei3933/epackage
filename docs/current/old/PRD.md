# Epackage Lab Web - Product Requirements Document v2.1

**Version**: 2.1 (Complete B2B Workflow)
**Date**: 2026-01-01
**Status**: Active
**Target Market**: Japan B2B Soft Packaging Materials

---

## Executive Summary

### Business Problem

æ—¥æœ¬ã®ã‚½ãƒ•ãƒˆåŒ…è£…ææ¥­ç•Œã¯ä»¥ä¸‹ã®èª²é¡Œã‚’æŠ±ãˆã¦ã„ã‚‹ï¼š
- **é›»è©±/FAXä¸­å¿ƒã®æ¥­å‹™ãƒ—ãƒ­ã‚»ã‚¹** - ãƒ‡ã‚¸ã‚¿ãƒ«åŒ–ãŒé…ã‚Œã¦ã„ã‚‹
- **è¤‡é›‘ãªãƒ‡ãƒ¼ã‚¿ã‚„ã‚Šå–ã‚Š** - é¡§å®¢â†”è£½é€ é–“ã§è¤‡æ•°å›ã®ãƒ‡ãƒ¼ã‚¿ä¿®æ­£ãŒå¿…è¦
- **é€²æ—è¦‹ãˆã‚‹åŒ–ä¸è¶³** - ã©ã“ã¾ã§é€²ã‚“ã§ã„ã‚‹ã‹åˆ†ã‹ã‚‰ãªã„
- **æ›¸é¡æ‰‹ç¶šãã®ç…©é›‘ã•** - è¦‹ç©ã€å¥‘ç´„ã€ç´å“æ›¸ãŒåˆ¥ã€…ã®ãƒ—ãƒ­ã‚»ã‚¹

### Solution

Epackage Lab Webã¯ã€**éŸ“å›½è£½é€ ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã¨ã®å®Œå…¨ãƒ‡ã‚¸ã‚¿ãƒ«é€£æº**ã‚’å®Ÿç¾ã—ãŸB2Bãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã‚ã‚‹ã€‚

- **12æ®µéšå®Œå…¨è‡ªå‹•ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼** - è¦‹ç©ã‹ã‚‰ç´å“ã¾ã§Webä¸Šã§å®Œçµ
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿äº¤æ›** - é¡§å®¢â†”éŸ“å›½å·¥å ´é–“ã®ãƒ‡ãƒ¼ã‚¿ä¿®æ­£ã‚’Webä¸Šã§å®Œçµ
- **é€²æ—å¯è¦–åŒ–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰** - é¡§å®¢ãƒ»ç®¡ç†è€…ã¨ã‚‚ã«å…¨å·¥ç¨‹ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æŠŠæ¡
- **é›»å­ç½²åãƒ»é›»å­å¥‘ç´„** - DocuSignçµ±åˆã§å¥‘ç´„ãƒ—ãƒ­ã‚»ã‚¹ã‚‚å®Œå…¨ãƒ‡ã‚¸ã‚¿ãƒ«åŒ–

### Business Value

| æŒ‡æ¨™ | ç›®æ¨™å€¤ | å¾“æ¥æ¯” |
|------|--------|--------|
| ãƒªãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ çŸ­ç¸® | 30% | é›»è©±/FAXæ’é™¤ã«ã‚ˆã‚‹ |
| é¡§å®¢å¯¾å¿œå·¥æ•°å‰Šæ¸› | 60% | Webå®Œçµã«ã‚ˆã‚‹ |
| ãƒ‡ãƒ¼ã‚¿ä¿®æ­£å›æ•°ã®å¯è¦–åŒ– | 100% | ä¿®æ­£å±¥æ­´å®Œå…¨è¿½è·¡ |
| é¡§å®¢æº€è¶³åº¦ | 90%+ | é€²æ—é€æ˜æ€§å‘ä¸Š |

---

## Complete B2B Workflow (12-Stage Process)

### Workflow Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EPACKAGE LAB B2B ORDER WORKFLOW                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  1. QUOTE          â”€â”€â”€â–¶  è¦‹ç©ä½œæˆãƒ»é€ä¿¡                                         â”‚
â”‚  2. SAMPLE         â”€â”€â”€â–¶  ã‚µãƒ³ãƒ—ãƒ«è«‹æ±‚ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰                             â”‚
â”‚  3. APPROVAL       â”€â”€â”€â–¶  è¦‹ç©æ‰¿èªãƒ»ç™ºæ³¨                                        â”‚
â”‚  4. INVOICE        â”€â”€â”€â–¶  é’æ§æ›¸ç™ºè¡Œãƒ»é€ä¿¡                                     â”‚
â”‚  5. DATA_UPLOAD    â”€â”€â”€â–¶  é¡§å®¢ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿å…¥ç¨¿                                â”‚
â”‚  6. DATA_TO_KR     â”€â”€â”€â–¶  ãƒ‡ãƒ¼ã‚¿éŸ“å›½å·¥å ´é€ä¿¡                                   â”‚
â”‚  7. DATA_CORRECT   â”€â”€â”€â–¶  éŸ“å›½å·¥å ´â†’êµì •ë°ì´í„° ë°˜í™˜                              â”‚
â”‚  8. SPEC_SEND      â”€â”€â”€â–¶  êµì •ë°ì´í„°ãƒ»ì‚¬ì–‘ì„œ ì†¡ë¶€ â†’ ê³ ê°ìŠ¹ì¸                     â”‚
â”‚  9. CONTRACT       â”€â”€â”€â–¶  ì „ìê³„ì•½ ì²´ê²°                                        â”‚
â”‚ 10. PRODUCTION     â”€â”€â”€â–¶  ì œì‘ (9ë‹¨ê³„ ì„œë¸Œí”„ë¡œì„¸ìŠ¤)                            â”‚
â”‚ 11. SHIPPING_KR    â”€â”€â”€â–¶  EMS/í•œêµ­â†’ì°½ê³  ë°°ì†¡                                   â”‚
â”‚ 12. DELIVERY       â”€â”€â”€â–¶  ì°½ê³ â†’ê³ ê°ì‚¬ ë°°ì†¡ + ë‚©í’ˆì„œ ì†¡ë¶€                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Stage 1: Quote (è¦‹ç©ä½œæˆ)

**Purpose**: é¡§å®¢ãŒå¸Œæœ›æ¡ä»¶ã§è¦‹ç©ã‚’è‡ªå‹•ä½œæˆ

**Key Features**:
- 5ãƒ‘ã‚¿ãƒ¼ãƒ³åŒæ™‚æ¯”è¼ƒï¼ˆæ•°é‡ãƒ»ç´ æãƒ»ã‚µã‚¤ã‚ºï¼‰
- å³åº§ã«PDFè¦‹ç©æ›¸ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
- ãƒ¡ãƒ¼ãƒ«ã§è¦‹ç©é€ä¿¡ï¼ˆSendGridï¼‰
- è¦‹ç©æœ‰åŠ¹æœŸé™ç®¡ç†ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ30æ—¥ï¼‰

**User Action**: è¦‹ç©ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§æ¡ä»¶å…¥åŠ› â†’ è¦‹ç©ä½œæˆãƒœã‚¿ãƒ³

**System Action**:
- ä¾¡æ ¼è¨ˆç®—ã‚¨ãƒ³ã‚¸ãƒ³å®Ÿè¡Œ
- PDFç”Ÿæˆ
- ãƒ¡ãƒ¼ãƒ«é€ä¿¡
- DBä¿å­˜ï¼ˆquotesãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰

---

### Stage 2: Sample Request (ã‚µãƒ³ãƒ—ãƒ«è«‹æ±‚) - Optional

**Purpose**: è£½å“ã‚µãƒ³ãƒ—ãƒ«ã®ç‰©ç†çš„ãªè«‹æ±‚

**Key Features**:
- æœ€å¤§5å€‹ã®ã‚µãƒ³ãƒ—ãƒ«åŒæ™‚è«‹æ±‚
- ä½æ‰€autofillï¼ˆæ³•äººç•ªå·ã‹ã‚‰ç™»è¨˜æƒ…å ±è‡ªå‹•å–å¾—ï¼‰
- ã‚µãƒ³ãƒ—ãƒ«é€æ–™ç„¡æ–™ï¼ˆä¸€éƒ¨æ¡ä»¶ï¼‰

**User Action**: ã‚«ã‚¿ãƒ­ã‚°ã‹ã‚‰ã‚µãƒ³ãƒ—ãƒ«é¸æŠ â†’ è«‹æ±‚ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›

**System Action**:
- åœ¨åº«ç¢ºèª
- ã‚µãƒ³ãƒ—ãƒ«ç™ºé€æŒ‡ç¤º
- è¿½è·¡ç•ªå·ãƒ¡ãƒ¼ãƒ«é€ä¿¡

---

### Stage 3: Quote Approval & Order (è¦‹ç©æ‰¿èªãƒ»ç™ºæ³¨)

**Purpose**: é¡§å®¢ãŒè¦‹ç©ã‚’æ‰¿èªã—ã€æ­£å¼æ³¨æ–‡ã‚’ä½œæˆ

**Key Features**:
- è¦‹ç©ã‹ã‚‰ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ç™ºæ³¨
- æ³¨æ–‡å†…å®¹ç¢ºèªç”»é¢
- æ‰¿èªãƒ¡ãƒ¼ãƒ«é€ä¿¡ï¼ˆé¡§å®¢ãƒ»ç®¡ç†è€…ä¸¡æ–¹ï¼‰

**User Action**: ãƒã‚¤ãƒãƒ¼ã‚¿ãƒ«ã‹ã‚‰ã€Œè¦‹ç©ã‚’æ‰¿èªã—ã¦ç™ºæ³¨ã€ãƒœã‚¿ãƒ³

**System Action**:
- `quotes.status`: 'approved'ã«æ›´æ–°
- `orders`ãƒ†ãƒ¼ãƒ–ãƒ«ã«æ–°è¦ãƒ¬ã‚³ãƒ¼ãƒ‰ä½œæˆ
- `orders.status`: 'PENDING' â†’ 'QUOTATION'ã«æ›´æ–°
- é€šçŸ¥é€ä¿¡

---

### Stage 4: Invoice Generation (é’æ§æ›¸ç™ºè¡Œ)

**Purpose**: æ­£å¼ãªé’æ§æ›¸ï¼ˆè«‹æ±‚æ›¸ï¼‰ã‚’ç™ºè¡Œãƒ»é€ä¿¡

**Key Features**:
- é’æ§æ›¸PDFç”Ÿæˆï¼ˆæ—¥æœ¬èªã€é›»å­å¸³æ³•å¯¾å¿œï¼‰
- ãƒ¡ãƒ¼ãƒ«æ·»ä»˜ã§é€ä¿¡
- ãƒã‚¤ãƒãƒ¼ã‚¿ãƒ«ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¯èƒ½

**System Action**:
- é’æ§æ›¸ãƒ‡ãƒ¼ã‚¿ä½œæˆï¼ˆ`invoices`ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
- PDFç”Ÿæˆ
- ãƒ¡ãƒ¼ãƒ«æ·»ä»˜é€ä¿¡
- ãƒã‚¤ãƒãƒ¼ã‚¿ãƒ«ã«è¡¨ç¤º

---

### Stage 5: Data Upload (ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿å…¥ç¨¿)

**Purpose**: é¡§å®¢ãŒãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

**Key Features**:
- è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«å¯¾å¿œï¼ˆAI, PDF, PSD, EPSç­‰ï¼‰
- ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰é€²æ—è¡¨ç¤º
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™ï¼ˆæœ€å¤§100MB/ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- AIè‡ªå‹•æŠ½å‡ºï¼ˆæ–‡å­—ãƒ»ã‚µã‚¤ã‚ºãƒ»è‰²æƒ…å ±ï¼‰

**User Action**: ãƒã‚¤ãƒãƒ¼ã‚¿ãƒ«ã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

**System Action**:
- Supabase Storageã«ä¿å­˜
- AIè§£æé–‹å§‹ï¼ˆ`ai-parser`ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰
- æŠ½å‡ºçµæœã‚’DBä¿å­˜ï¼ˆ`design_data`ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
- ç®¡ç†è€…é€šçŸ¥

---

### Stage 6: Data to Korea Factory via Email (éŸ“å›½å·¥å ´é€ä¿¡ - ì´ë©”ì¼)

**Purpose**: å…¥ç¨¿ãƒ‡ãƒ¼ã‚¿ã‚’éŸ“å›½è£½é€ ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«**ì´ë©”ì¼ë¡œ**é€ä¿¡

**Key Features**:
- **ì´ë©”ì¼ ê¸°ë°˜ ë°ì´í„° ì „ì†¡** - API ì—°ë™ ì—†ì´ ì´ë©”ì¼ë¡œ ì™„ì „ ì²˜ë¦¬
- **AI ì¶”ì¶œ ë°ì´í„°ë¥¼ ì´ë©”ì¼ ë³¸ë¬¸ì— ìƒì„¸ ê¸°ì¬**
- **íŒŒì¼ ì²¨ë¶€** - ì›ë³¸ ë””ìì¸ íŒŒì¼ (AI, PDF, PSD ë“±)
- **ì†¡ì‹  í™•ì¸ ì¶”ì ** - ì´ë©”ì¼ ë°œì†¡ ìƒíƒœ ê´€ë¦¬

**ì´ë©”ì¼ í…œí”Œë¦¿ êµ¬ì¡°**:

```email
Subject: [JP-2025-001] ë””ìì¸ ë°ì´í„° ì…ç¨¿ - {ê³ ê°ì‚¬ëª…}

ë‹´ë‹¹ìë‹˜ê»˜,

ìƒˆë¡œìš´ ì£¼ë¬¸ì˜ ë””ìì¸ ë°ì´í„°ê°€ ë„ì°©í–ˆìŠµë‹ˆë‹¤.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì£¼ë¬¸ ê¸°ë³¸ ì •ë³´
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ì£¼ë¬¸ë²ˆí˜¸: JP-2025-001
ê³ ê°ì‚¬: {ê³ ê°ì‚¬ëª…}
ë‹´ë‹¹ì: {ë‹´ë‹¹ìëª…} ({ì´ë©”ì¼})
ì—°ë½ì²˜: {ì „í™”ë²ˆí˜¸}
ì£¼ë¬¸ì¼: {YYYY-MM-DD}
í¬ë§ ë‚©ê¸°: {YYYY-MM-DD}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì œí’ˆ ì‚¬ì–‘ (AI ìë™ ì¶”ì¶œ ê²°ê³¼)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[í˜•íƒœ]
- íƒ€ì…: {ìŠ¤íƒ ë“œ íŒŒìš°ì¹˜ / ì§€í¼ë°± / ë°•ìŠ¤}
- ì‚¬ì´ì¦ˆ: {ê°€ë¡œ}mm x {ì„¸ë¡œ}mm
- ì¬ì§ˆ: {PET / AL / PE / CPP}
- ë‘ê»˜: {ë§ˆì´í¬ë¡ } Î¼m
- ì§€í¼: {ì§€í¼ ì‚¬ì–‘}

[ì¸ì‡„ ì‚¬ì–‘]
- ì¸ì‡„ ë°©ì‹: {ê·¸ë¼ë¹„ì•„ / ì‹¤í¬ / ì˜¤í”„ì…‹}
- ìƒ‰ìƒ ëª¨ë“œ: {CMYK / Pantone}
- ìƒ‰ìƒ ì½”ë“œ:
  * ë©”ì¸ ì»¬ëŸ¬: #{color1}
  * ì„œë¸Œ ì»¬ëŸ¬: #{color2}
  * í¬ì¸íŠ¸ ì»¬ëŸ¬: #{color3}

[ë””ìì¸ í…ìŠ¤íŠ¸]
- ì œí’ˆëª…: {AI ì¶”ì¶œ í…ìŠ¤íŠ¸}
- ë¸Œëœë“œ ë¡œê³ : {ìˆìŒ / ì—†ìŒ}
- ë°”ì½”ë“œ: {ìˆìŒ / ì—†ìŒ} ({íƒ€ì…})
- ì˜ì–‘ì •ë³´: {ìˆìŒ / ì—†ìŒ}

[ì¶”ê°€ ìš”êµ¬ì‚¬í•­]
- íŠ¹ìˆ˜ ì½”íŒ…: {UV ì½”íŒ… / ë§¤íŠ¸ ì½”íŒ… / ì—†ìŒ}
- ì°½êµ¬: {ìˆìŒ / ì—†ìŒ} ({ìœ„ì¹˜, í¬ê¸°})
- ìŠ¬ë¦¿: {ìˆìŒ / ì—†ìŒ} ({ê°„ê²©})
- ê¸°íƒ€: {ê¸°íƒ€ ì‚¬í•­}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì²¨ë¶€ íŒŒì¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. design_v1.ai (Adobe Illustrator) - 12.5 MB
2. logo.png (PNG) - 256 KB
3. specification.pdf - 1.2 MB

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
AI ì¶”ì¶œ ì‹ ë¢°ë„
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

- í…ìŠ¤íŠ¸ ì¶”ì¶œ: 98%
- ìƒ‰ìƒ ì¶”ì¶œ: 95%
- í¬ê¸° ì¶”ì¶œ: 100%
- ì „ì²´ ì‹ ë¢°ë„: 97%

âš ï¸ ì£¼ì˜: AI ì¶”ì¶œ ê²°ê³¼ëŠ” 100% ì •í™•í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë°˜ë“œì‹œ ì²¨ë¶€ëœ ì›ë³¸ íŒŒì¼ê³¼ í•¨ê»˜ í™•ì¸í•´ ì£¼ì‹­ì‹œì˜¤.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ë³¸ ì´ë©”ì¼ì€ Epackage Lab ì‹œìŠ¤í…œì—ì„œ ìë™ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.

ë¬¸ì˜: admin@epackage-lab.com
í¬í„¸ í™•ì¸: https://epackage-lab.com/admin/orders/JP-2025-001
```

**System Action**:
```typescript
// Stage 6: ì´ë©”ì¼ ë°œì†¡ í”„ë¡œì„¸ìŠ¤
async function sendDesignDataToKorea(orderId: string) {
  // 1. ì£¼ë¬¸ ì •ë³´ ì¡°íšŒ
  const order = await getOrder(orderId);
  const designFiles = await getDesignFiles(orderId);
  const aiExtractedData = await getAIExtractedData(orderId);

  // 2. ì´ë©”ì¼ ë³¸ë¬¸ ìƒì„± (AI ì¶”ì¶œ ë°ì´í„° í¬í•¨)
  const emailBody = generateEmailTemplate({
    order,
    designFiles,
    aiExtractedData
  });

  // 3. ì´ë©”ì¼ ë°œì†¡ (SendGrid)
  await sendgrid.send({
    from: 'design@package-lab.com',  // ì¼ë³¸ ì¸¡ ì‹œìŠ¤í…œ
    to: 'info@package-lab.com',       // í•œêµ­ íŒŒíŠ¸ë„ˆ
    subject: `[JP-${order.orderNumber}] ë””ìì¸ ë°ì´í„° ì…ê³  - ${order.companyName}`,
    text: emailBody,
    attachments: designFiles.map(f => ({
      filename: f.name,
      content: f.base64, // Base64 ì¸ì½”ë”©
      type: f.mimeType
    }))
  });

  // 4. ìƒíƒœ ì—…ë°ì´íŠ¸
  await updateOrder(orderId, {
    current_stage: 'DATA_TO_KR',
    data_sent_to_kr_at: new Date(),
    design_files_sent_email: true
  });
}
```

---

### Stage 7: Data Correction from Korea via Email (êµì •ë°ì´í„° ë°˜í™˜ - ì´ë©”ì¼)

**Purpose**: éŸ“å›½å·¥å ´ã‹ã‚‰**ì´ë©”ì¼ë¡œ**æ ¡æ­£ãƒ‡ãƒ¼ã‚¿ë¥¼ ë°˜í™˜

**Key Features**:
- **ì´ë©”ì¼ ê¸°ë°˜ êµì • ë°ì´í„° ìˆ˜ì‹ ** - API/Webhook ì—†ì´ ì´ë©”ì¼ë¡œ ì²˜ë¦¬
- **ì´ë¯¸ì§€ íŒŒì¼(JPG)ë¡œ ë””ìì¸ í”„ë¦¬ë·° ì œê³µ**
- **ê´€ë¦¬ìê°€ ì‹œìŠ¤í…œì— ìˆ˜ë™ìœ¼ë¡œ íŒŒì¼ ì—…ë¡œë“œ**
- **êµì • ë‚´ì—­(ì½”ë©˜íŠ¸) í‘œì‹œ**

**í”„ë¡œì„¸ìŠ¤ íë¦„**:

```
1. í•œêµ­ ê³µì¥ì—ì„œ êµì • ì™„ë£Œ
   â†“
2. í•œêµ­ ë‹´ë‹¹ìê°€ ì´ë©”ì¼ë¡œ êµì • ë°ì´í„° ì†¡ë¶€
   - ì œëª©: [êµì • ì™„ë£Œ] JP-2025-001 - 1ì°¨ ìˆ˜ì •
   - ë³¸ë¬¸: êµì • ë‚´ì—­ ì„¤ëª…
   - ì²¨ë¶€:
     * design_corrected_v1.jpg (ë””ìì¸ ë¯¸ë¦¬ë³´ê¸°)
     * design_corrected_v1.ai (ìˆ˜ì •ëœ ì›ë³¸ íŒŒì¼)
     * correction_notes.pdf (êµì • ë‚´ì—­ ì„œë¥˜)
   â†“
3. ê´€ë¦¬ìê°€ ì´ë©”ì¼ ìˆ˜ì‹  í›„ ì‹œìŠ¤í…œì— ì—…ë¡œë“œ
   - ë§ˆì´í¬í„¸ì—ì„œ íŒŒì¼ ì—…ë¡œë“œ
   - êµì • ì½”ë©˜íŠ¸ ì…ë ¥
   â†“
4. ì‹œìŠ¤í…œ ì €ì¥ ë° ê³ ê° ì•Œë¦¼
   - Supabase Storageì— ì €ì¥
   - ê³ ê°ì—ê²Œ "êµì • ë°ì´í„° ë„ì°©" ë©”ì¼ ë°œì†¡
```

**ì´ë©”ì¼ í…œí”Œë¦¿ (í•œêµ­ ê³µì¥ â†’ ê´€ë¦¬ì)**:

```email
Subject: [êµì • ì™„ë£Œ] JP-2025-001 - {ê³ ê°ì‚¬ëª…} ({ìˆ˜ì •íšŸìˆ˜}ì°¨ ìˆ˜ì •)

ê´€ë¦¬ìë‹˜ê»˜,

êµì • ë°ì´í„°ê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì£¼ë¬¸ ì •ë³´
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì£¼ë¬¸ë²ˆí˜¸: JP-2025-001
ê³ ê°ì‚¬: {ê³ ê°ì‚¬ëª…}
ìˆ˜ì • íšŸìˆ˜: {n}ì°¨

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
êµì • ë‚´ì—­
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[ìƒ‰ìƒ ë³´ì •]
- ì›ë³¸: RGB(255,0,0) â†’ CMYK: C0 M100 Y100 K0
- ì´ìœ : ì¸ì‡„ ì‹œ ë©”íƒ€ë¨¸ ê·¸ë ˆì´ë¸Œ ë°©ì§€

[í…ìŠ¤íŠ¸ ìˆ˜ì •]
- {ìˆ˜ì • ì „} â†’ {ìˆ˜ì • í›„}
- ì´ìœ : {ìˆ˜ì • ì‚¬ìœ }

[ë ˆì´ì•„ì›ƒ ì¡°ì •]
- ë¡œê³  ìœ„ì¹˜: 5mm ìš°ì¸¡ ì´ë™
- ì´ìœ : ë°”ì½”ë“œì™€ ê°„ê²© í™•ë³´

[ê¸°íƒ€ ì‚¬í•­]
- {ê¸°íƒ€ êµì • ë‚´ì—­}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì²¨ë¶€ íŒŒì¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. design_corrected_v1.jpg - ë””ìì¸ ë¯¸ë¦¬ë³´ê¸°
2. design_corrected_v1.ai - ìˆ˜ì •ëœ ì›ë³¸ íŒŒì¼
3. correction_notes.pdf - êµì • ìƒì„¸ ë‚´ì—­

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ê´€ë¦¬ì í¬í„¸ì—ì„œ ê³ ê°ì—ê²Œ ìŠ¹ì¸ ìš”ì²­ì„ ë³´ë‚´ì£¼ì„¸ìš”.

https://epackage-lab.com/admin/orders/JP-2025-001/correction
```

**ì´ë¯¸ì§€ íŒŒì¼ í˜•ì‹ (JPG) ìš”êµ¬ì‚¬í•­**:
```
design_corrected_v1.jpg
- í˜•ì‹: JPEG
- í¬ê¸°: 1920x1080px ì´ìƒ (ê¶Œì¥: 2560x1440px)
- ìƒ‰ìƒ í”„ë¡œíŒŒì¼: sRGB
- í’ˆì§ˆ: 90% ì´ìƒ
- íŒŒì¼ í¬ê¸°: 2MB ì´í•˜
- ë‚´ìš©: ì „ì²´ ë””ìì¸ ë ˆì´ì•„ì›ƒ + ì£¼ìš” ë¶€ë¶„ í™•ëŒ€
- ìš©ë„: ê³ ê°ì´ ì›¹ì—ì„œ ë°”ë¡œ í™•ì¸í•  ìˆ˜ ìˆëŠ” í”„ë¦¬ë·°
```

**ê´€ë¦¬ì ì—…ë¡œë“œ í™”ë©´**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  êµì • ë°ì´í„° ì—…ë¡œë“œ - JP-2025-001                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  í•œêµ­ ê³µì¥ì—ì„œ ë°›ì€ êµì • ë°ì´í„°ë¥¼ ì—…ë¡œë“œí•´ ì£¼ì‹­ì‹œì˜¤.          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“ ë””ìì¸ í”„ë¦¬ë·° ì´ë¯¸ì§€ (JPG)                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚ [íŒŒì¼ ì„ íƒ] ë˜ëŠ” ë“œë˜ê·¸ ì•¤ ë“œë¡­                    â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â”‚  ìš”êµ¬ì‚¬í•­: JPEG, 1920x1080px ì´ìƒ, 2MB ì´í•˜           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“ ì›ë³¸ ë””ìì¸ íŒŒì¼ (AI/PDF/PSD/EPS)                   â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚ [íŒŒì¼ ì„ íƒ]                                        â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“ êµì • ì½”ë©˜íŠ¸                                       â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚ ì¹¼ë¼ ì½”ë“œë¥¼ CMYKë¡œ ë³€í™˜í–ˆìŠµë‹ˆë‹¤.               â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ ë¡œê³  ìœ„ì¹˜ë¥¼ 5mm ìš°ì¸¡ìœ¼ë¡œ ì¡°ì •í–ˆìŠµë‹ˆë‹¤.          â”‚    â”‚    â”‚
â”‚  â”‚  â”‚                                               â”‚    â”‚    â”‚
â”‚  â”‚  â”‚                                               â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ğŸ“ êµì • ì„œë¥˜ (PDF) - ì„ íƒì‚¬í•­                          â”‚    â”‚
â”‚  â”‚  [íŒŒì¼ ì„ íƒ]                                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  â˜‘ï¸ ê³ ê°ì—ê²Œ ì¦‰ì‹œ ìŠ¹ì¸ ìš”ì²­ ë³´ë‚´ê¸°                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚              [ì—…ë¡œë“œ] [ì·¨ì†Œ]                                 â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**System Action**:
```typescript
// Stage 7: êµì • ë°ì´í„° ì²˜ë¦¬ (ê´€ë¦¬ì ì—…ë¡œë“œ)
async function handleCorrectionDataUpload(orderId: string, data: {
  previewImage: File,    // JPG
  originalFile: File,    // AI/PDF/PSD
  comments: string,
  document?: File
}) {
  // 1. íŒŒì¼ ì €ì¥
  const previewUrl = await uploadToSupabase(data.previewImage, 'corrections');
  const originalUrl = await uploadToSupabase(data.originalFile, 'corrections');

  // 2. êµì • ê¸°ë¡ ìƒì„±
  await createDesignRevision({
    orderId,
    revisionNumber: await getNextRevisionNumber(orderId),
    corrected_files: [
      { type: 'preview', url: previewUrl, name: data.previewImage.name },
      { type: 'original', url: originalUrl, name: data.originalFile.name }
    ],
    partner_comment: data.comments,
    document_url: data.document ? await uploadToSupabase(data.document) : null
  });

  // 3. ìƒíƒœ ì—…ë°ì´íŠ¸
  await updateOrder(orderId, {
    current_stage: 'SPEC_SEND',
    correction_received_at: new Date(),
    correction_count: increment(1)
  });

  // 4. ê³ ê° ì•Œë¦¼ (ì¦‰ì‹œ ìŠ¹ì¸ ìš”ì²­ ì—¬ë¶€ì— ë”°ë¼)
  if (data.sendImmediateApproval) {
    await sendApprovalRequestToCustomer(orderId);
  }
}
```

---

### Stage 8: Spec Sheet & Customer Approval (ì‚¬ì–‘ì„œ ì†¡ë¶€ ë° ìŠ¹ì¸)

**Purpose**: æ ¡æ­£ãƒ‡ãƒ¼ã‚¿ã¨ä»•æ§˜æ›¸ã‚’é¡§å®¢ã«é€ä»˜ã—ã€æ‰¿èªã‚’å¾—ã‚‹

**Key Features**:
- **ä»•æ§˜æ›¸ç”Ÿæˆ** - AIæŠ½å‡ºãƒ‡ãƒ¼ã‚¿ã¨æ ¡æ­£ãƒ‡ãƒ¼ã‚¿ã‚’çµ±åˆ
- **ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½** - Webä¸Šã§ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’ç¢ºèª
- **æ‰¿èªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼** - æ‰¿èªãƒ»ä¿®æ­£ä¾é ¼ãƒ»ã‚­ãƒ£ãƒ³ã‚»ãƒ«

**User Action**:
1. ãƒã‚¤ãƒãƒ¼ã‚¿ãƒ«ã§æ ¡æ­£ãƒ‡ãƒ¼ã‚¿ãƒ»ä»•æ§˜æ›¸ã‚’ç¢ºèª
2. 3ã¤ã®é¸æŠè‚¢:
   - âœ… æ‰¿èªã™ã‚‹ â†’ æ¬¡ã®æ®µéšã¸
   - ğŸ”„ ä¿®æ­£ã‚’ä¾é ¼ã™ã‚‹ â†’ Stage 6-8ã‚’ãƒ«ãƒ¼ãƒ—
   - âŒ ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã™ã‚‹ â†’ æ³¨æ–‡ã‚­ãƒ£ãƒ³ã‚»ãƒ«

**System Action** (æ‰¿èªæ™‚):
- `orders.approvalStage`: 'spec_sheet_approved'ã«æ›´æ–°
- é›»å­å¥‘ç´„ãƒ—ãƒ­ã‚»ã‚¹é–‹å§‹ï¼ˆStage 9ï¼‰
- éŸ“å›½ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«æ‰¿èªé€šçŸ¥APIå‘¼ã³å‡ºã—

---

### Stage 9: Electronic Contract (ì „ìê³„ì•½)

**Purpose**: é›»å­ç½²åã§æ­£å¼å¥‘ç´„ã‚’ç· çµ

**Key Features**:
- **DocuSignçµ±åˆ** - é›»å­ç½²åãƒ—ãƒ­ã‚»ã‚¹
- å¥‘ç´„æ›¸PDFç”Ÿæˆï¼ˆæ—¥æœ¬èªã€é›»å­å¥‘ç´„æ³•å¯¾å¿œï¼‰
- ç½²åé€²æ—è¿½è·¡

**System Flow**:
```
1. ã‚·ã‚¹ãƒ†ãƒ ã§å¥‘ç´„æ›¸PDFç”Ÿæˆ
   - æ³¨æ–‡å†…å®¹
   - ä»•æ§˜æ›¸æ·»ä»˜
   - ç½²åæ¬„
   â†“
2. DocuSignã§ã‚¨ãƒ³ãƒ™ãƒ­ãƒ¼ãƒ—ä½œæˆ
   - é¡§å®¢é€ä¿¡
   - Epackage Labç½²å
   â†“
3. Webhookã§ç½²åå®Œäº†å—ä¿¡
   - orders.status: 'CONTRACT_SIGNED'ã«æ›´æ–°
   - ç”Ÿç”£é–‹å§‹æŒ‡ç¤ºï¼ˆStage 10ï¼‰
```

---

### Stage 10: Production (ì œì‘)

**Purpose**: éŸ“å›½å·¥å ´ã§è£½é€ å®Ÿæ–½

**Key Features**:
- **9æ®µéšã‚µãƒ–ãƒ—ãƒ­ã‚»ã‚¹è¿½è·¡**
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€²æ—æ›´æ–°
- å®Œäº†äºˆå®šæ—¥è¡¨ç¤º

**9æ®µéšã‚µãƒ–ãƒ—ãƒ­ã‚»ã‚¹**:

| ã‚¹ãƒ†ãƒƒãƒ— | åç§° | èª¬æ˜ | äºˆæƒ³æ—¥æ•° |
|----------|------|------|----------|
| 1 | design_received | ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿å—é ˜ | - |
| 2 | work_order_created | ä½œæ¥­æŒ‡ç¤ºæ›¸ä½œæˆ | 1æ—¥ |
| 3 | material_prepared | ææ–™æº–å‚™å®Œäº† | 2æ—¥ |
| 4 | printing | å°åˆ· | 3æ—¥ |
| 5 | lamination | ãƒ©ãƒŸãƒãƒ¼ãƒˆåŠ å·¥ | 2æ—¥ |
| 6 | slitting | ã‚¹ãƒªãƒƒãƒˆåŠ å·¥ | 1æ—¥ |
| 7 | pouch_making | ãƒ‘ã‚¦ãƒè£½é€  | 2æ—¥ |
| 8 | qc_passed | å“è³ªæ¤œæŸ»åˆæ ¼ | 1æ—¥ |
| 9 | packaged | åŒ…è£…å®Œäº† | 1æ—¥ |

**System Integration**:
```typescript
// Production Status API (Korea Partner)
GET /api/orders/{id}/production-status

Response:
{
  stage: "printing",
  progress: 44,  // 4/9 stages
  estimatedCompletion: "2025-01-15",
  photos: ["production_line_1.jpg", "qc_check_1.jpg"]
}
```

---

### Stage 11: Shipping to Japan Warehouse (í•œêµ­â†’ì°½ê³  ë°°ì†¡)

**Purpose**: è£½å“ã‚’éŸ“å›½ã‹ã‚‰æ—¥æœ¬å€‰åº«ã¸è¼¸é€

**Key Features**:
- **EMSè¿½è·¡** - è¿½è·¡ç•ªå·é€£æº
- é€šé–¢ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º
- äºˆæƒ³åˆ°ç€æ—¥è¡¨ç¤º

**System Flow**:
```
1. éŸ“å›½å·¥å ´ã§è£½é€ å®Œäº†
   - EMSé€ã‚ŠçŠ¶ç™ºè¡Œ
   â†“
2. Webhookã§è¿½è·¡æƒ…å ±å—ä¿¡
   POST /api/orders/{id}/shipping
   {
     carrier: "EMS",
     trackingNumber: "EM123456789JP",
     stages: ["pickup", "customs", "in_transit", "arrived"]
   }
   â†“
3. æ—¥æœ¬å€‰åº«åˆ°ç€æ™‚
   - orders.status: 'STOCK_IN'ã«æ›´æ–°
   - é¡§å®¢ã«åˆ°ç€é€šçŸ¥
```

---

### Stage 12: Final Delivery (ìµœì¢… ë‚©í’ˆ)

**Purpose**: å€‰åº«ã‹ã‚‰é¡§å®¢ã¸é…é€ãƒ»ç´å“æ›¸é€ä»˜

**Key Features**:
- **å›½å†…é…é€** - ãƒ¤ãƒãƒˆé‹è¼¸ãƒ»ä½å·æ€¥ä¾¿ãƒ»æ—¥æœ¬éƒµä¾¿é€£æº
- **ç´å“æ›¸PDF** - é…é€ã¨åŒæ™‚ã«é›»å­é€ä»˜
- é…é€è¿½è·¡é€£æº

**System Flow**:
```
1. é¡§å®¢ç™ºæ³¨ã¾ãŸã¯è‡ªå‹•å‡ºè·
   â†“
2. å€‰åº«ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰é…é€æŒ‡ç¤º
   - ã‚­ãƒ£ãƒªã‚¢é¸æŠï¼ˆãƒ¤ãƒãƒˆãƒ»ä½å·ãƒ»éƒµä¾¿ï¼‰
   - è¿½è·¡ç•ªå·å–å¾—
   â†“
3. é…é€é–‹å§‹
   - orders.status: 'SHIPPED'
   - ç´å“æ›¸PDFç”Ÿæˆãƒ»ãƒ¡ãƒ¼ãƒ«é€ä¿¡
   â†“
4. é…é€å®Œäº†
   - é…é€ã‚­ãƒ£ãƒªã‚¢Webhookã§å®Œäº†é€šçŸ¥
   - orders.status: 'DELIVERED'
```

---

## Technical Architecture

### State Machine Design

```typescript
// Complete 12-Stage State Machine
type OrderStage =
  | 'QUOTE'           // Stage 1
  | 'SAMPLE'          // Stage 2 (Optional)
  | 'APPROVAL'        // Stage 3
  | 'INVOICE'         // Stage 4
  | 'DATA_UPLOAD'     // Stage 5
  | 'DATA_TO_KR'      // Stage 6
  | 'DATA_CORRECT'    // Stage 7
  | 'SPEC_SEND'       // Stage 8
  | 'CONTRACT'        // Stage 9
  | 'PRODUCTION'      // Stage 10 (9 sub-stages)
  | 'SHIPPING_KR'     // Stage 11
  | 'DELIVERY'        // Stage 12
  | 'COMPLETED'       // Final state
  | 'CANCELLED';      // Cancel state

// State Transitions
const TRANSITIONS: Record<OrderStage, OrderStage[]> = {
  QUOTE: ['SAMPLE', 'APPROVAL', 'CANCELLED'],
  SAMPLE: ['APPROVAL', 'QUOTE', 'CANCELLED'],
  APPROVAL: ['INVOICE', 'CANCELLED'],
  INVOICE: ['DATA_UPLOAD', 'CANCELLED'],
  DATA_UPLOAD: ['DATA_TO_KR', 'CANCELLED'],
  DATA_TO_KR: ['DATA_CORRECT'],
  DATA_CORRECT: ['SPEC_SEND'],
  SPEC_SEND: ['CONTRACT', 'DATA_TO_KR'], // Loop for revision
  CONTRACT: ['PRODUCTION'],
  PRODUCTION: ['SHIPPING_KR', 'CANCELLED'],
  SHIPPING_KR: ['DELIVERY'],
  DELIVERY: ['COMPLETED'],
  COMPLETED: [],
  CANCELLED: []
};
```

### Data Flow Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DATA FLOW DIAGRAM (EMAIL-BASED)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  CUSTOMER              SYSTEM              KOREA PARTNER                â”‚
â”‚    â”‚                   â”‚                      â”‚                         â”‚
â”‚    â”œâ”€1. Quote Request â”€â–¶â”‚                      â”‚                         â”‚
â”‚    â”‚â—€â”€ Quote PDF       â”‚                      â”‚                         â”‚
â”‚    â”‚                   â”‚                      â”‚                         â”‚
â”‚    â”œâ”€2. Sample Requestâ”€â–¶â”‚                      â”‚                         â”‚
â”‚    â”‚â—€â”€ Tracking #      â”‚                      â”‚                         â”‚
â”‚    â”‚                   â”‚                      â”‚                         â”‚
â”‚    â”œâ”€3. Approve & Orderâ”‚                      â”‚                         â”‚
â”‚    â”‚â—€â”€ Invoice PDF     â”‚                      â”‚                         â”‚
â”‚    â”‚                   â”‚                      â”‚                         â”‚
â”‚    â”œâ”€5. Upload Design â”€â–¶â”‚                      â”‚                         â”‚
â”‚    â”‚                   â”‚                      â”‚                         â”‚
â”‚    â”‚                   â”‚â”€6. Email â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ (AI Data in body)      â”‚
â”‚    â”‚                   â”‚    + Attachments     â”‚                         â”‚
â”‚    â”‚                   â”‚                      â”‚                         â”‚
â”‚    â”‚                   â”‚â—€â”€7. Email â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ (JPG preview + files)  â”‚
â”‚    â”‚                   â”‚                      â”‚                         â”‚
â”‚    â”‚â—€â”€8. Spec Sheet    â”‚  (Admin uploaded)   â”‚                         â”‚
â”‚    â”‚                   â”‚                      â”‚                         â”‚
â”‚    â”œâ”€9. E-Sign â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                      â”‚                         â”‚
â”‚    â”‚                   â”‚                      â”‚                         â”‚
â”‚    â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚10. Production            â”‚
â”‚    â”‚                   â”‚â—€â”€11. Email (Tracking) â”€â”¤ (EMS #)                 â”‚
â”‚    â”‚                   â”‚                      â”‚                          â”‚
â”‚    â”‚                   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚12. Ship to Warehouse     â”‚
â”‚    â”‚â—€â”€12. Delivery     â”‚                      â”‚                          â”‚
â”‚    â”‚   + Delivery Note â”‚                      â”‚                          â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“§ EMAIL-BASED INTEGRATION:
- Stage 6: System â†’ Korea (Email with AI data in body + file attachments)
- Stage 7: Korea â†’ System (Email with JPG preview + corrected files)
- Stage 11: Korea â†’ System (Email with EMS tracking number)
```

---

## Integration Architecture

### Korea Partner Email Integration

**Purpose**: éŸ“å›½è£½é€ ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã¨ã®**ì´ë©”ì¼ ê¸°ë°˜** ë°ì´í„°é€£æº

**Stage 6: ãƒ‡ãƒ¼ã‚¿é€ä¿¡ (System â†’ Korea)**

| é …ç›® | å†…å®¹ |
|------|------|
| é€ä¿¡æ–¹æ³• | SendGrid API |
| é€ä¿¡å…ƒ | design@package-lab.com (æ—¥æœ¬å´ã‚·ã‚¹ãƒ†ãƒ ) |
| å®›å…ˆ | info@package-lab.com (éŸ“å›½ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼) |
| ä»¶åå½¢å¼ | `[JP-{æ³¨æ–‡ç•ªå·}] ë””ìì¸ ë°ì´í„° ì…ê³  - {ê³ ê°ì‚¬ëª…}` |
| ë³¸ë¬¸ | AI ì¶”ì¶œ ë°ì´í„° ìƒì„¸ í¬í•¨ |
| ì²¨ë¶€íŒŒì¼ | ì›ë³¸ ë””ìì¸ íŒŒì¼ (AI, PDF, PSD ë“±) |

**ì´ë©”ì¼ ë³¸ë¬¸ í¬í•¨ í•­ëª©**:
- ì£¼ë¬¸ ê¸°ë³¸ ì •ë³´ (ì£¼ë¬¸ë²ˆí˜¸, ê³ ê°ì‚¬, ë‹´ë‹¹ì, ì—°ë½ì²˜, ì£¼ë¬¸ì¼, í¬ë§ ë‚©ê¸°)
- ì œí’ˆ ì‚¬ì–‘ (AI ìë™ ì¶”ì¶œ: í˜•íƒœ, ì‚¬ì´ì¦ˆ, ì¬ì§ˆ, ë‘ê»˜, ì§€í¼)
- ì¸ì‡„ ì‚¬ì–‘ (ì¸ì‡„ ë°©ì‹, ìƒ‰ìƒ ëª¨ë“œ, ìƒ‰ìƒ ì½”ë“œ)
- ë””ìì¸ í…ìŠ¤íŠ¸ (ì œí’ˆëª…, ë¡œê³ , ë°”ì½”ë“œ, ì˜ì–‘ì •ë³´)
- ì¶”ê°€ ìš”êµ¬ì‚¬í•­ (ì½”íŒ…, ì°½êµ¬, ìŠ¬ë¦¿, ê¸°íƒ€)
- AI ì¶”ì¶œ ì‹ ë¢°ë„ (í…ìŠ¤íŠ¸ 98%, ìƒ‰ìƒ 95%, í¬ê¸° 100%)
- ì²¨ë¶€ íŒŒì¼ ëª©ë¡
- í¬í„¸ í™•ì¸ ë§í¬

---

**Stage 7: êµì • ë°ì´í„° ìˆ˜ì‹  (Korea â†’ System)**

| é …ç›® | ë‚´ìš© |
|------|------|
| ìˆ˜ì‹  ë°©ë²• | ì´ë©”ì¼ (ê´€ë¦¬ìê°€ ìˆ˜ë™ í™•ì¸) |
| ë°œì‹ ì | info@package-lab.com (éŸ“å›½ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼) |
| ìˆ˜ì‹ ì | design@package-lab.com (æ—¥æœ¬å´ãƒ‡ã‚¶ã‚¤ãƒ³) |
| ä»¶åå½¢å¼ | `[êµì • ì™„ë£Œ] JP-{æ³¨æ–‡ë²ˆí˜¸} - {ê³ ê°ì‚¬ëª…} ({n}ì°¨ ìˆ˜ì •)` |
| ë³¸ë¬¸ | êµì • ë‚´ì—­ ìƒì„¸ ì„¤ëª… |
| ì²¨ë¶€íŒŒì¼ | design_corrected_v{n}.jpg (ë¯¸ë¦¬ë³´ê¸°), design_corrected_v{n}.ai (ì›ë³¸), correction_notes.pdf (ì„ íƒ) |

**JPG ë¯¸ë¦¬ë³´ê¸° íŒŒì¼ ìš”êµ¬ì‚¬í•­**:
```
design_corrected_v1.jpg
- í˜•ì‹: JPEG
- í¬ê¸°: 1920x1080px ì´ìƒ (ê¶Œì¥: 2560x1440px)
- ìƒ‰ìƒ í”„ë¡œíŒŒì¼: sRGB
- í’ˆì§ˆ: 90% ì´ìƒ
- íŒŒì¼ í¬ê¸°: 2MB ì´í•˜
- ë‚´ìš©: ì „ì²´ ë””ìì¸ ë ˆì´ì•„ì›ƒ + ì£¼ìš” ë¶€ë¶„ í™•ëŒ€
- ìš©ë„: ê³ ê°ì´ ì›¹ì—ì„œ ë°”ë¡œ í™•ì¸í•  ìˆ˜ ìˆëŠ” í”„ë¦¬ë·°
```

**ê´€ë¦¬ì ì‘ì—… í”„ë¡œì„¸ìŠ¤**:
1. ì´ë©”ì¼ ìˆ˜ì‹  í™•ì¸
2. ê´€ë¦¬ì í¬í„¸ì—ì„œ íŒŒì¼ ì—…ë¡œë“œ:
   - ë””ìì¸ í”„ë¦¬ë·° (JPG)
   - ì›ë³¸ ë””ìì¸ íŒŒì¼ (AI/PDF/PSD)
   - êµì • ì½”ë©˜íŠ¸ ì…ë ¥
3. "ê³ ê°ì—ê²Œ ì¦‰ì‹œ ìŠ¹ì¸ ìš”ì²­ ë³´ë‚´ê¸°" ì²´í¬
4. ì—…ë¡œë“œ ì™„ë£Œ â†’ ìë™ìœ¼ë¡œ ê³ ê° ì•Œë¦¼

---

**Stage 11: ë°°ì†¡ ì¶”ì  (Korea â†’ System)**

| é …ç›® | ë‚´ìš© |
|------|------|
| ìˆ˜ì‹  ë°©ë²• | ì´ë©”ì¼ (ê´€ë¦¬ìê°€ ìˆ˜ë™ í™•ì¸) |
| ë°œì‹ ì | info@package-lab.com (éŸ“å›½ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼) |
| ìˆ˜ì‹ ì | info@package-lab.com (æ—¥æœ¬å´ç™ºé€æ‹…å½“) |
| ä»¶å í˜•ì‹ | `[ì¶œí•˜] JP-{æ³¨æ–‡ë²ˆí˜¸} - EMS ì¶”ì ë²ˆí˜¸: {EM123456789JP}` |
| ë³¸ë¬¸ | ì¶œí•˜ì¼ì, EMS ì¶”ì ë²ˆí˜¸, ì˜ˆìƒ ë„ì°©ì¼ |

---

### Carrier Integration

**Domestic Shipping** (Japan):
- ãƒ¤ãƒãƒˆé‹è¼¸ API
- ä½å·æ€¥ä¾¿ API
- æ—¥æœ¬éƒµä¾¿ API

**International Shipping**:
- EMS (Japan Post) - ì¶”ì  ë²ˆí˜¸ë§Œ ì´ë©”ì¼ë¡œ ìˆ˜ì‹ 

### E-Signature Integration

**DocuSign Integration**:
```typescript
// Contract Signing Flow
POST /api/orders/{id}/contract
{
  signers: [
    { email: "customer@example.com", role: "customer" },
    { email: "admin@epackage-lab.com", role: "company" }
  ],
  documents: [
    { name: "contract.pdf", type: "application/pdf" }
  ]
}

// Webhook: DocuSign â†’ Our System
POST /api/webhooks/docusign
{
  event: "signature_completed",
  envelopeId: "xxx-xxx-xxx",
  orderId: "JP-2025-001"
}
```

---

## Notification System

### Multi-Stakeholder Notifications

å„ã‚¹ãƒ†ãƒ¼ã‚¸ã§é©åˆ‡ãªé–¢ä¿‚è€…ã«é€šçŸ¥é€ä¿¡:

| ã‚¹ãƒ†ãƒ¼ã‚¸ | é¡§å®¢é€šçŸ¥ | ç®¡ç†è€…é€šçŸ¥ | éŸ“å›½ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ |
|----------|----------|------------|---------------|
| Quote | âœ… ãƒ¡ãƒ¼ãƒ« | âœ… ãƒ¡ãƒ¼ãƒ« | - |
| Sample | âœ… ãƒ¡ãƒ¼ãƒ« | âœ… ãƒ¡ãƒ¼ãƒ« | - |
| Approval | âœ… ãƒ¡ãƒ¼ãƒ« | âœ… ãƒ¡ãƒ¼ãƒ« | - |
| Invoice | âœ… ãƒ¡ãƒ¼ãƒ«(PDF) | âœ… ãƒ¡ãƒ¼ãƒ« | - |
| Data Upload | âœ… ç¢ºèª | âœ… æ–°è¦é€šçŸ¥ | - |
| Data to KR | âœ… é€ä¿¡å®Œäº† | âœ… é€ä¿¡å®Œäº† | âœ… API |
| Correction | âœ… ä¿®æ­£æº–å‚™å®Œäº† | âœ… ä¿®æ­£å—ä¿¡ | - |
| Spec Send | âœ… æ‰¿èªä¾é ¼ | âœ… æ‰¿èªå¾…ã¡ | - |
| Contract | âœ… ç½²åä¾é ¼ | âœ… ç½²åå¾…ã¡ | - |
| Production | âœ… é–‹å§‹é€šçŸ¥ | âœ… ç›£è¦– | âœ… API |
| Shipping KR | âœ… è¿½è·¡ç•ªå· | âœ… è¿½è·¡ | - |
| Delivery | âœ… å®Œäº†+ç´å“æ›¸ | âœ… å®Œäº† | - |

**Notification Channels**:
- Email (SendGrid) - ä¸»é€šçŸ¥ãƒãƒ£ãƒãƒ«
- SMS (Twilio) - é‡è¦é€šçŸ¥
- LINE Messaging API (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
- In-App Notification - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°

---

## Database Schema (Key Tables)

### orders (æ‹¡å¼µ)

```sql
CREATE TABLE orders (
  id UUID PRIMARY KEY,
  order_number VARCHAR(20) UNIQUE,  -- JP-2025-001

  -- Stage tracking
  current_stage VARCHAR(30) NOT NULL,  -- OrderStage enum
  previous_stage VARCHAR(30),
  stage_history JSONB,  -- [{stage, timestamp, actor}]

  -- Quote & Approval
  quote_id UUID REFERENCES quotes(id),
  approved_at TIMESTAMP,
  approved_by UUID REFERENCES users(id),

  -- Invoice
  invoice_id UUID REFERENCES invoices(id),
  invoice_sent_at TIMESTAMP,

  -- Design Data
  design_files JSONB,  -- [{name, url, size, uploadedAt}]
  design_data_extracted JSONB,  -- AI extracted data
  data_uploaded_at TIMESTAMP,

  -- Korea Partner Integration
  partner_order_id VARCHAR(50),  -- KR-2025-12345
  data_sent_to_kr_at TIMESTAMP,
  correction_received_at TIMESTAMP,
  correction_count INT DEFAULT 0,

  -- Spec Sheet Approval
  spec_sheet_url TEXT,
  spec_approved_at TIMESTAMP,
  spec_approved_by UUID REFERENCES users(id),

  -- Contract
  contract_id UUID REFERENCES contracts(id),
  docusign_envelope_id VARCHAR(100),
  contract_signed_at TIMESTAMP,

  -- Production
  production_started_at TIMESTAMP,
  production_stage VARCHAR(50),  -- ProductionSubStatus
  production_progress INT,  -- 0-100
  estimated_completion DATE,

  -- Shipping
  shipping_method VARCHAR(20),  -- EMS / YAMATO / SAGAWA / JP_POST
  tracking_number_kr VARCHAR(50),  -- EMS tracking
  tracking_number_domestic VARCHAR(50),
  shipped_from_kr_at TIMESTAMP,
  shipped_to_customer_at TIMESTAMP,
  warehouse_arrived_at TIMESTAMP,

  -- Delivery
  delivery_note_url TEXT,  -- ç´å“æ›¸PDF
  delivered_at TIMESTAMP,

  -- Metadata
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),
  status VARCHAR(20)  -- OrderStatus (uppercase)
);
```

### design_revisions (æ–°å¢)

```sql
CREATE TABLE design_revisions (
  id UUID PRIMARY KEY,
  order_id UUID REFERENCES orders(id),
  revision_number INT NOT NULL,

  -- Files
  customer_files JSONB,  -- é¡§å®¢ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«
  corrected_files JSONB,  -- éŸ“å›½ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼æ ¡æ­£ãƒ•ã‚¡ã‚¤ãƒ«
  spec_sheet_url TEXT,

  -- Comments
  customer_comment TEXT,
  partner_comment TEXT,

  -- Approval
  approval_status VARCHAR(20),  -- pending / approved / rejected
  approved_by UUID REFERENCES users(id),
  approved_at TIMESTAMP,

  created_at TIMESTAMP DEFAULT NOW()
);
```

### notifications (æ–°å¢)

```sql
CREATE TABLE notifications (
  id UUID PRIMARY KEY,
  order_id UUID REFERENCES orders(id),
  recipient_id UUID REFERENCES users(id),
  recipient_type VARCHAR(20),  -- customer / admin / partner

  -- Content
  subject VARCHAR(200),
  body TEXT,
  stage VARCHAR(30),  -- å¯¾å¿œã‚¹ãƒ†ãƒ¼ã‚¸

  -- Channels
  email_sent BOOLEAN DEFAULT FALSE,
  email_sent_at TIMESTAMP,
  sms_sent BOOLEAN DEFAULT FALSE,
  in_app_sent BOOLEAN DEFAULT FALSE,

  -- Status
  read BOOLEAN DEFAULT FALSE,
  read_at TIMESTAMP,

  created_at TIMESTAMP DEFAULT NOW()
);
```

---

## User Interface Design

### Customer Portal - Order Detail Page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ³¨æ–‡ #JP-2025-001                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ“Š æ³¨æ–‡é€²æ— (7/12 ã‚¹ãƒ†ãƒ¼ã‚¸å®Œäº†)                              â”‚  â”‚
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  58%                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚  âœ… 1. è¦‹ç©ä½œæˆ      2024-12-01 å®Œäº†                               â”‚
â”‚  â­ï¸  2. ã‚µãƒ³ãƒ—ãƒ«      ã‚¹ã‚­ãƒƒãƒ—                                      â”‚
â”‚  âœ… 3. è¦‹ç©æ‰¿èª      2024-12-02 å®Œäº†                               â”‚
â”‚  âœ… 4. é’æ§æ›¸        2024-12-02 é€ä¿¡æ¸ˆã¿                           â”‚
â”‚  âœ… 5. ãƒ‡ãƒ¼ã‚¿å…¥ç¨¿    2024-12-05 å®Œäº† (3ãƒ•ã‚¡ã‚¤ãƒ«)                    â”‚
â”‚  âœ… 6. éŸ“å›½é€ä¿¡      2024-12-05 å®Œäº†                               â”‚
â”‚  ğŸ”„ 7. ãƒ‡ãƒ¼ã‚¿ä¿®æ­£    ç¾åœ¨å‡¦ç†ä¸­...                                 â”‚
â”‚  â³ 8. ä»•æ§˜æ›¸æ‰¿èª    å¾…æ©Ÿ                                         â”‚
â”‚  â³ 9. é›»å­å¥‘ç´„      å¾…æ©Ÿ                                         â”‚
â”‚  â³ 10. è£½é€         äºˆå®š: 2024-12-20                               â”‚
â”‚  â³ 11. éŸ“å›½é…é€    äºˆå®š: 2024-12-23                               â”‚
â”‚  â³ 12. ç´å“        äºˆå®š: 2024-12-25                               â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ“ ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«                                           â”‚  â”‚
â”‚  â”‚  â€¢ design_v1.ai  (é¡§å®¢å…¥ç¨¿)   12.5 MB                       â”‚  â”‚
â”‚  â”‚  â€¢ logo.png        (æ·»ä»˜)        256 KB                       â”‚  â”‚
â”‚  â”‚  â³ æ ¡æ­£ãƒ‡ãƒ¼ã‚¿å¾…ã¡...                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸ“„ æ›¸é¡                                                      â”‚  â”‚
â”‚  â”‚  [ğŸ“„ è¦‹ç©æ›¸PDF] [ğŸ“„ é’æ§æ›¸PDF]                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Admin Dashboard - Order Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ - æ³¨æ–‡ç®¡ç†                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼: [å…¨ã¦] [ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å¾…ã¡] [ä¿®æ­£ä¸­] [è£½é€ ä¸­]              â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æ³¨æ–‡ # â”‚ ã‚¹ãƒ†ãƒ¼ã‚¸        â”‚ é¡§å®¢        â”‚ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³              â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ JP-001  â”‚ ğŸ”´ ãƒ‡ãƒ¼ã‚¿ä¿®æ­£   â”‚ æ ªå¼ä¼šç¤¾A   â”‚ [ä¿®æ­£å†…å®¹ç¢ºèª]        â”‚  â”‚
â”‚  â”‚ JP-002  â”‚ ğŸŸ¡ ä»•æ§˜æ›¸æ‰¿èªå¾…ã¡â”‚ æ ªå¼ä¼šç¤¾B   â”‚ [é€šçŸ¥é€ä¿¡]            â”‚  â”‚
â”‚  â”‚ JP-003  â”‚ ğŸŸ¢ è£½é€ ä¸­      â”‚ æ ªå¼ä¼šç¤¾C   â”‚ [è©³ç´°]                â”‚  â”‚
â”‚  â”‚ JP-004  â”‚ âœ… å®Œäº†         â”‚ æ ªå¼ä¼šç¤¾D   â”‚ [ç´å“æ›¸å†é€]          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                     â”‚
â”‚  ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å¾…ã¡: 3ä»¶                                               â”‚
â”‚  ä¿®æ­£ä¸­: 1ä»¶                                                       â”‚
â”‚  è£½é€ ä¸­: 5ä»¶                                                      â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Success Metrics

### Workflow Completion Metrics

| æŒ‡æ¨™ | ç›®æ¨™å€¤ | æ¸¬å®šæ–¹æ³• |
|------|--------|----------|
| å¹³å‡ãƒªãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ  | 20æ—¥ | æ³¨æ–‡ã‹ã‚‰ç´å“ã¾ã§ |
| ã‚¹ãƒ†ãƒ¼ã‚¸å®Œäº†ç‡ | 95%+ | å„ã‚¹ãƒ†ãƒ¼ã‚¸ã®å®Œäº†ç‡ |
| ãƒ‡ãƒ¼ã‚¿ä¿®æ­£å›æ•° | å¹³å‡1.5å› | é¡§å®¢æ‰¿èªã¾ã§ã®ä¿®æ­£æ•° |
| é›»è©±å•ã„åˆã‚ã›å‰Šæ¸› | 70% | Webå®Œçµã«ã‚ˆã‚‹å‰Šæ¸› |

### Customer Satisfaction Metrics

| æŒ‡æ¨™ | ç›®æ¨™å€¤ | æ¸¬å®šæ–¹æ³• |
|------|--------|----------|
| é€²æ—å¯è¦–åŒ–æº€è¶³åº¦ | 90%+ | ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ |
| ã‚µãƒãƒ¼ãƒˆå¯¾å¿œæ™‚é–“ | 24æ™‚é–“ä»¥å†… | å•ã„åˆã‚ã›â†’åˆå›å›ç­” |
| ãƒªãƒ”ãƒ¼ãƒˆç‡ | 60%+ | 6ãƒ¶æœˆä»¥å†…ã®å†æ³¨æ–‡ |

---

## Risk Assessment & Mitigation

### Technical Risks

| ãƒªã‚¹ã‚¯ | å½±éŸ¿ | ç·©å’Œç­– |
|--------|------|--------|
| **APIé€£æºã‚¨ãƒ©ãƒ¼** | é«˜ | ãƒªãƒˆãƒ©ã‚¤å‡¦ç†ã€ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚° |
| **ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™** | ä¸­ | Supabase Storageæœ€é©åŒ– |
| **é›»å­ç½²åå¤±æ•—** | é«˜ | ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆPDFç½²åï¼‰ |

### Business Risks

| ãƒªã‚¹ã‚¯ | å½±éŸ¿ | ç·©å’Œç­– |
|--------|------|--------|
| **éŸ“å›½ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼é…å»¶** | é«˜ | SLAç· çµã€äºˆå‚™ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ |
| **ãƒ‡ãƒ¼ã‚¿ä¿®æ­£å›æ•°å¢—åŠ ** | ä¸­ | AIå“è³ªå‘ä¸Šã€ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³å¼·åŒ– |
| **é¡§å®¢ã‚­ãƒ£ãƒ³ã‚»ãƒ«** | ä¸­ | ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒãƒªã‚·ãƒ¼æ˜ç¢ºåŒ– |

---

## Future Roadmap (Updated)

### Phase 1 (Current - âœ… Core Complete)
- [x] Basic Website & Quote System
- [x] Member Registration & Portal
- [x] Admin Dashboard
- [x] Order Management System

### Phase 2 (Q1 2025 - ğŸš§ In Progress)
- [ ] Korea Partner API Integration
- [ ] AI Design Parser Enhancement
- [ ] DocuSign E-Signature Integration
- [ ] Carrier API Integration (EMS + Domestic)

### Phase 3 (Q2 2025 - ğŸ“‹ Planned)
- [ ] Advanced Analytics Dashboard
- [ ] LINE Bot Notification
- [ ] Self-Service Order Revisions
- [ ] Multi-language Support (English/Korean)

### Phase 4 (Q3 2025 - ğŸ’­ Future)
- [ ] Mobile App (React Native)
- [ ] AI-powered Quality Prediction
- [ ] Supplier Portal Expansion
- [ ] International Expansion (SEA)

---

## Appendix

### Glossary

| ç”¨èª | èª¬æ˜ |
|------|------|
| **ã‚½ãƒ•ãƒˆåŒ…è£…æ** | Stand Pouchã€Zipper Bagç­‰ã®æŸ”è»ŸãªåŒ…è£…æ |
| **å…¥ç¨¿** | é¡§å®¢ã‹ã‚‰ã®ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿æå‡º |
| **æ ¡æ­£** | ãƒ‡ãƒ¼ã‚¿ã®ä¿®æ­£ãƒ»èª¿æ•´ãƒ—ãƒ­ã‚»ã‚¹ |
| **ä»•æ§˜æ›¸** | è£½å“ã®è©³ç´°ä»•æ§˜ã‚’è¨˜è¼‰ã—ãŸæ–‡æ›¸ |
| **ç´å“æ›¸** | é…é€å®Œäº†æ™‚ã«é€ä»˜ã™ã‚‹æ›¸é¡ |
| **é’æ§æ›¸** | æ—¥æœ¬ã®è«‹æ±‚æ›¸ï¼ˆæ§ãˆï¼‰ |
| **é›»å­å¥‘ç´„** | Webä¸Šã§å®Œçµã™ã‚‹å¥‘ç´„ãƒ—ãƒ­ã‚»ã‚¹ |

### API Documentation References

- [Korea Partner API Spec](/docs/api/B2B_WORKFLOW_API_SPECIFICATION.md)
- [Carrier Integration Guide](/docs/references/shipping-carriers.md)
- [Database Schema](/docs/current/architecture/database-schema.md)

---

**Change History**:

| Version | Date | Changes |
|---------|------|---------|
| 2.0 | 2026-01-01 | Initial PRD v2.0 |
| 2.1 | 2026-01-01 | **Complete 12-Stage B2B Workflow** - Korea partner integration, e-signature, full data exchange |

---

**Document Owner**: Product Team
**Last Updated**: 2026-01-01
**Next Review**: 2026-04-01
